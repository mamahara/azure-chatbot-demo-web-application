"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _glamor = require("glamor");

var _classnames = _interopRequireDefault(require("classnames"));

var _react = _interopRequireDefault(require("react"));

var _AutoCenter = _interopRequireDefault(require("./AutoCenter"));

var _Composer = _interopRequireDefault(require("./Composer"));

var _Context = _interopRequireDefault(require("./Context"));

var _createBasicStyleSet = _interopRequireDefault(require("./createBasicStyleSet"));

var _Dots = _interopRequireDefault(require("./Dots"));

var _FilmStrip = _interopRequireDefault(require("./FilmStrip"));

var _Flipper = _interopRequireDefault(require("./Flipper"));

var _memoize = _interopRequireDefault(require("./memoize"));

var _ScrollBar = _interopRequireDefault(require("./ScrollBar"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

var CAROUSEL_CSS = (0, _glamor.css)({
  overflow: 'hidden',
  position: 'relative'
});

var BasicFilm =
/*#__PURE__*/
function (_React$Component) {
  _inherits(BasicFilm, _React$Component);

  function BasicFilm(props) {
    var _this;

    _classCallCheck(this, BasicFilm);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(BasicFilm).call(this, props));
    _this.createHeightStyle = (0, _memoize.default)(function (height) {
      return {
        height: height
      };
    });
    _this.createBasicStyleSet = (0, _memoize.default)(function (_ref) {
      var autoHide = _ref.autoHide,
          autoHideFlipperOnEdge = _ref.autoHideFlipperOnEdge;
      return (0, _createBasicStyleSet.default)({
        autoHide: autoHide,
        autoHideFlipperOnEdge: autoHideFlipperOnEdge
      });
    });
    return _this;
  }

  _createClass(BasicFilm, [{
    key: "render",
    value: function render() {
      var props = this.props;

      var _this$createBasicStyl = _objectSpread({}, this.createBasicStyleSet(props), {}, props.styleSet || {}),
          carousel = _this$createBasicStyl.carousel,
          dotsBox = _this$createBasicStyl.dotsBox,
          dotsItem = _this$createBasicStyl.dotsItem,
          leftFlipper = _this$createBasicStyl.leftFlipper,
          rightFlipper = _this$createBasicStyl.rightFlipper,
          scrollBarBox = _this$createBasicStyl.scrollBarBox,
          scrollBarHandler = _this$createBasicStyl.scrollBarHandler;

      var dir = props.dir;
      var rtl = dir === 'rtl';
      var _props$leftFlipperTex = props.leftFlipperText,
          leftFlipperText = _props$leftFlipperTex === void 0 ? rtl ? '>' : '<' : _props$leftFlipperTex,
          flipperBlurFocusOnClick = props.flipperBlurFocusOnClick,
          numItems = props.numItems,
          _props$rightFlipperTe = props.rightFlipperText,
          rightFlipperText = _props$rightFlipperTe === void 0 ? rtl ? '<' : '>' : _props$rightFlipperTe,
          scrollBarWidth = props.scrollBarWidth,
          scrolling = props.scrolling,
          _props$showDots = props.showDots,
          showDots = _props$showDots === void 0 ? true : _props$showDots,
          _props$showFlipper = props.showFlipper,
          showFlipper = _props$showFlipper === void 0 ? true : _props$showFlipper,
          _props$showScrollBar = props.showScrollBar,
          showScrollBar = _props$showScrollBar === void 0 ? true : _props$showScrollBar;
      return _react.default.createElement(_react.default.Fragment, null, _react.default.createElement("div", {
        className: props.className,
        dir: dir
      }, _react.default.createElement("div", {
        className: (0, _classnames.default)(CAROUSEL_CSS + '', {
          scrolling: scrolling
        }, carousel + ''),
        style: this.createHeightStyle(props.height)
      }, !!numItems && scrollBarWidth !== '100%' && !!showFlipper && _react.default.createElement(_Flipper.default, {
        blurFocusOnClick: flipperBlurFocusOnClick,
        className: leftFlipper + '',
        mode: "left"
      }, _react.default.createElement("div", null, leftFlipperText)), _react.default.createElement(_FilmStrip.default, null, props.children), !!numItems && scrollBarWidth !== '100%' && !!showFlipper && _react.default.createElement(_Flipper.default, {
        blurFocusOnClick: flipperBlurFocusOnClick,
        className: rightFlipper + '',
        mode: "right"
      }, _react.default.createElement("div", null, rightFlipperText)), !!numItems && scrollBarWidth !== '100%' && !!showScrollBar && _react.default.createElement(_ScrollBar.default, {
        className: scrollBarBox + '',
        handlerClassName: scrollBarHandler + ''
      })), !!numItems && scrollBarWidth !== '100%' && !!showDots && _react.default.createElement(_Dots.default, {
        className: dotsBox + '',
        itemClassName: dotsItem + ''
      }, function () {
        return _react.default.createElement("div", null);
      })), props.autoCenter !== false && _react.default.createElement(_AutoCenter.default, null));
    }
  }]);

  return BasicFilm;
}(_react.default.Component);

var _default = function _default(props) {
  return _react.default.createElement(_Composer.default, {
    dir: props.dir,
    numItems: _react.default.Children.count(props.children)
  }, _react.default.createElement(_Context.default.Consumer, null, function (_ref2) {
    var numItems = _ref2.numItems,
        scrollBarWidth = _ref2.scrollBarWidth,
        scrolling = _ref2.scrolling;
    return _react.default.createElement(BasicFilm, _extends({}, props, {
      numItems: numItems,
      scrollBarWidth: scrollBarWidth,
      scrolling: scrolling
    }));
  }));
};

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9CYXNpY0ZpbG0uanMiXSwibmFtZXMiOlsiQ0FST1VTRUxfQ1NTIiwib3ZlcmZsb3ciLCJwb3NpdGlvbiIsIkJhc2ljRmlsbSIsInByb3BzIiwiY3JlYXRlSGVpZ2h0U3R5bGUiLCJoZWlnaHQiLCJjcmVhdGVCYXNpY1N0eWxlU2V0IiwiYXV0b0hpZGUiLCJhdXRvSGlkZUZsaXBwZXJPbkVkZ2UiLCJzdHlsZVNldCIsImNhcm91c2VsIiwiZG90c0JveCIsImRvdHNJdGVtIiwibGVmdEZsaXBwZXIiLCJyaWdodEZsaXBwZXIiLCJzY3JvbGxCYXJCb3giLCJzY3JvbGxCYXJIYW5kbGVyIiwiZGlyIiwicnRsIiwibGVmdEZsaXBwZXJUZXh0IiwiZmxpcHBlckJsdXJGb2N1c09uQ2xpY2siLCJudW1JdGVtcyIsInJpZ2h0RmxpcHBlclRleHQiLCJzY3JvbGxCYXJXaWR0aCIsInNjcm9sbGluZyIsInNob3dEb3RzIiwic2hvd0ZsaXBwZXIiLCJzaG93U2Nyb2xsQmFyIiwiY2xhc3NOYW1lIiwiY2hpbGRyZW4iLCJhdXRvQ2VudGVyIiwiUmVhY3QiLCJDb21wb25lbnQiLCJDaGlsZHJlbiIsImNvdW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBLElBQU1BLFlBQVksR0FBRyxpQkFBSTtBQUN2QkMsRUFBQUEsUUFBUSxFQUFFLFFBRGE7QUFFdkJDLEVBQUFBLFFBQVEsRUFBRTtBQUZhLENBQUosQ0FBckI7O0lBS01DLFM7Ozs7O0FBQ0oscUJBQVlDLEtBQVosRUFBbUI7QUFBQTs7QUFBQTs7QUFDakIsbUZBQU1BLEtBQU47QUFFQSxVQUFLQyxpQkFBTCxHQUF5QixzQkFBUSxVQUFBQyxNQUFNO0FBQUEsYUFBSztBQUFFQSxRQUFBQSxNQUFNLEVBQU5BO0FBQUYsT0FBTDtB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UUFBUSxFQUFHa0IsUUFGYjtBQUdFLE1BQUEsY0FBYyxFQUFHRSxjQUhuQjtBQUlFLE1BQUEsU0FBUyxFQUFHQztBQUpkLE9BREE7QUFBQSxHQURKLENBREYsQ0FEa0I7QUFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnZ2xhbW9yJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IEF1dG9DZW50ZXIgZnJvbSAnLi9BdXRvQ2VudGVyJztcbmltcG9ydCBDb21wb3NlciBmcm9tICcuL0NvbXBvc2VyJztcbmltcG9ydCBDb250ZXh0IGZyb20gJy4vQ29udGV4dCc7XG5pbXBvcnQgY3JlYXRlQmFzaWNTdHlsZVNldCBmcm9tICcuL2NyZWF0ZUJhc2ljU3R5bGVTZXQnO1xuaW1wb3J0IERvdHMgZnJvbSAnLi9Eb3RzJztcbmltcG9ydCBGaWxtU3RyaXAgZnJvbSAnLi9GaWxtU3RyaXAnO1xuaW1wb3J0IEZsaXBwZXIgZnJvbSAnLi9GbGlwcGVyJztcbmltcG9ydCBtZW1vaXplIGZyb20gJy4vbWVtb2l6ZSc7XG5pbXBvcnQgU2Nyb2xsQmFyIGZyb20gJy4vU2Nyb2xsQmFyJztcblxuY29uc3QgQ0FST1VTRUxfQ1NTID0gY3NzKHtcbiAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xufSk7XG5cbmNsYXNzIEJhc2ljRmlsbSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5jcmVhdGVIZWlnaHRTdHlsZSA9IG1lbW9pemUoaGVpZ2h0ID0+ICh7IGhlaWdodCB9KSk7XG4gICAgdGhpcy5jcmVhdGVCYXNpY1N0eWxlU2V0ID0gbWVtb2l6ZSgoeyBhdXRvSGlkZSwgYXV0b0hpZGVGbGlwcGVyT25FZGdlIH0pID0+IGNyZWF0ZUJhc2ljU3R5bGVTZXQoeyBhdXRvSGlkZSwgYXV0b0hpZGVGbGlwcGVyT25FZGdlIH0pKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHByb3BzIH0gPSB0aGlzO1xuXG4gICAgY29uc3Qge1xuICAgICAgY2Fyb3VzZWwsXG4gICAgICBkb3RzQm94LFxuICAgICAgZG90c0l0ZW0sXG4gICAgICBsZWZ0RmxpcHBlcixcbiAgICAgIHJpZ2h0RmxpcHBlcixcbiAgICAgIHNjcm9sbEJhckJveCxcbiAgICAgIHNjcm9sbEJhckhhbmRsZXIsXG4gICAgfSA9IHtcbiAgICAgIC4uLnRoaXMuY3JlYXRlQmFzaWNTdHlsZVNldChwcm9wcyksXG4gICAgICAuLi4ocHJvcHMuc3R5bGVTZXQgfHwge30pXG4gICAgfTtcblxuICAgIGNvbnN0IHsgZGlyIH0gPSBwcm9wcztcbiAgICBjb25zdCBydGwgPSBkaXIgPT09ICdydGwnO1xuXG4gICAgY29uc3Qge1xuICAgICAgbGVmdEZsaXBwZXJUZXh0ID0gcnRsID8gJz4nIDogJzwnLFxuICAgICAgZmxpcHBlckJsdXJGb2N1c09uQ2xpY2ssXG4gICAgICBudW1JdGVtcyxcbiAgICAgIHJpZ2h0RmxpcHBlclRleHQgPSBydGwgPyAnPCcgOiAnPicsXG4gICAgICBzY3JvbGxCYXJXaWR0aCxcbiAgICAgIHNjcm9sbGluZyxcbiAgICAgIHNob3dEb3RzID0gdHJ1ZSxcbiAgICAgIHNob3dGbGlwcGVyID0gdHJ1ZSxcbiAgICAgIHNob3dTY3JvbGxCYXIgPSB0cnVlXG4gICAgfSA9IHByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9eyBwcm9wcy5jbGFzc05hbWUgfSBkaXI9eyBkaXIgfT5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9eyBjbGFzc05hbWVzKENBUk9VU0VMX0NTUyArICcnLCB7IHNjcm9sbGluZyB9LCBjYXJvdXNlbCArICcnKSB9XG4gICAgICAgICAgICBzdHlsZT17IHRoaXMuY3JlYXRlSGVpZ2h0U3R5bGUocHJvcHMuaGVpZ2h0KSB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgeyAhIW51bUl0ZW1zICYmIHNjcm9sbEJhcldpZHRoICE9PSAnMTAwJScgJiYgISFzaG93RmxpcHBlciAmJlxuICAgICAgICAgICAgICA8RmxpcHBlciBibHVyRm9jdXNPbkNsaWNrPXsgZmxpcHBlckJsdXJGb2N1c09uQ2xpY2sgfSBjbGFzc05hbWU9eyBsZWZ0RmxpcHBlciArICcnIH0gbW9kZT1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2PnsgbGVmdEZsaXBwZXJUZXh0IH08L2Rpdj5cbiAgICAgICAgICAgICAgPC9GbGlwcGVyPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgPEZpbG1TdHJpcD5cbiAgICAgICAgICAgICAgeyBwcm9wcy5jaGlsZHJlbiB9XG4gICAgICAgICAgICA8L0ZpbG1TdHJpcD5cbiAgICAgICAgICAgIHsgISFudW1JdGVtcyAmJiBzY3JvbGxCYXJXaWR0aCAhPT0gJzEwMCUnICYmICEhc2hvd0ZsaXBwZXIgJiZcbiAgICAgICAgICAgICAgPEZsaXBwZXIgYmx1ckZvY3VzT25DbGljaz17IGZsaXBwZXJCbHVyRm9jdXNPbkNsaWNrIH0gY2xhc3NOYW1lPXsgcmlnaHRGbGlwcGVyICsgJycgfSBtb2RlPVwicmlnaHRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2PnsgcmlnaHRGbGlwcGVyVGV4dCB9PC9kaXY+XG4gICAgICAgICAgICAgIDwvRmxpcHBlcj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHsgISFudW1JdGVtcyAmJiBzY3JvbGxCYXJXaWR0aCAhPT0gJzEwMCUnICYmICEhc2hvd1Njcm9sbEJhciAmJlxuICAgICAgICAgICAgICA8U2Nyb2xsQmFyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXsgc2Nyb2xsQmFyQm94ICsgJycgfVxuICAgICAgICAgICAgICAgIGhhbmRsZXJDbGFzc05hbWU9eyBzY3JvbGxCYXJIYW5kbGVyICsgJycgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtcbiAgICAgICAgICAgICEhbnVtSXRlbXMgJiYgc2Nyb2xsQmFyV2lkdGggIT09ICcxMDAlJyAmJiAhIXNob3dEb3RzICYmXG4gICAgICAgICAgICAgIDxEb3RzXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXsgZG90c0JveCArICcnIH1cbiAgICAgICAgICAgICAgICBpdGVtQ2xhc3NOYW1lPXsgZG90c0l0ZW0gKyAnJ31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHsgKCkgPT4gPGRpdiAvPiB9XG4gICAgICAgICAgICAgIDwvRG90cz5cbiAgICAgICAgICB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7IHByb3BzLmF1dG9DZW50ZXIgIT09IGZhbHNlICYmIDxBdXRvQ2VudGVyIC8+IH1cbiAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBwcm9wcyA9PlxuICA8Q29tcG9zZXIgZGlyPXsgcHJvcHMuZGlyIH0gbnVtSXRlbXM9eyBSZWFjdC5DaGlsZHJlbi5jb3VudChwcm9wcy5jaGlsZHJlbikgfT5cbiAgICA8Q29udGV4dC5Db25zdW1lcj5cbiAgICAgIHsgKHsgbnVtSXRlbXMsIHNjcm9sbEJhcldpZHRoLCBzY3JvbGxpbmcgfSkgPT5cbiAgICAgICAgPEJhc2ljRmlsbVxuICAgICAgICAgIHsgLi4ucHJvcHMgfVxuICAgICAgICAgIG51bUl0ZW1zPXsgbnVtSXRlbXMgfVxuICAgICAgICAgIHNjcm9sbEJhcldpZHRoPXsgc2Nyb2xsQmFyV2lkdGggfVxuICAgICAgICAgIHNjcm9sbGluZz17IHNjcm9sbGluZyB9XG4gICAgICAgIC8+XG4gICAgICB9XG4gICAgPC9Db250ZXh0LkNvbnN1bWVyPlxuICA8L0NvbXBvc2VyPiJdfQ==