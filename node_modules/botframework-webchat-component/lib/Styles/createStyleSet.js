"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createStyleSet;

var _Activities = _interopRequireDefault(require("./StyleSet/Activities"));

var _Activity = _interopRequireDefault(require("./StyleSet/Activity"));

var _AudioAttachment = _interopRequireDefault(require("./StyleSet/AudioAttachment"));

var _AudioContent = _interopRequireDefault(require("./StyleSet/AudioContent"));

var _Avatar = _interopRequireDefault(require("./StyleSet/Avatar"));

var _Bubble = _interopRequireDefault(require("./StyleSet/Bubble"));

var _CarouselFilmStrip = _interopRequireDefault(require("./StyleSet/CarouselFilmStrip"));

var _CarouselFlipper = _interopRequireDefault(require("./StyleSet/CarouselFlipper"));

var _ConnectivityNotification = _interopRequireDefault(require("./StyleSet/ConnectivityNotification"));

var _DictationInterims = _interopRequireDefault(require("./StyleSet/DictationInterims"));

var _ErrorBox = _interopRequireDefault(require("./StyleSet/ErrorBox"));

var _ErrorNotification = _interopRequireDefault(require("./StyleSet/ErrorNotification"));

var _FileContent = _interopRequireDefault(require("./StyleSet/FileContent"));

var _ImageAvatar = _interopRequireDefault(require("./StyleSet/ImageAvatar"));

var _InitialsAvatar = _interopRequireDefault(require("./StyleSet/InitialsAvatar"));

var _MicrophoneButton = _interopRequireDefault(require("./StyleSet/MicrophoneButton"));

var _Root = _interopRequireDefault(require("./StyleSet/Root"));

var _ScrollToEndButton = _interopRequireDefault(require("./StyleSet/ScrollToEndButton"));

var _SendBoxButton = _interopRequireDefault(require("./StyleSet/SendBoxButton"));

var _SendBox = _interopRequireDefault(require("./StyleSet/SendBox"));

var _SendBoxTextArea = _interopRequireDefault(require("./StyleSet/SendBoxTextArea"));

var _SendBoxTextBox = _interopRequireDefault(require("./StyleSet/SendBoxTextBox"));

var _SendStatus = _interopRequireDefault(require("./StyleSet/SendStatus"));

var _SingleAttachmentActivity = _interopRequireDefault(require("./StyleSet/SingleAttachmentActivity"));

var _SpinnerAnimation = _interopRequireDefault(require("./StyleSet/SpinnerAnimation"));

var _StackedLayout = _interopRequireDefault(require("./StyleSet/StackedLayout"));

var _SuggestedActions = _interopRequireDefault(require("./StyleSet/SuggestedActions"));

var _SuggestedActionsStyleSet = _interopRequireDefault(require("./StyleSet/SuggestedActionsStyleSet"));

var _SuggestedAction = _interopRequireDefault(require("./StyleSet/SuggestedAction"));

var _TextContent = _interopRequireDefault(require("./StyleSet/TextContent"));

var _Toaster = _interopRequireDefault(require("./StyleSet/Toaster"));

var _Toast = _interopRequireDefault(require("./StyleSet/Toast"));

var _TypingAnimation = _interopRequireDefault(require("./StyleSet/TypingAnimation"));

var _TypingIndicator = _interopRequireDefault(require("./StyleSet/TypingIndicator"));

var _UploadButton = _interopRequireDefault(require("./StyleSet/UploadButton"));

var _VideoAttachment = _interopRequireDefault(require("./StyleSet/VideoAttachment"));

var _VideoContent = _interopRequireDefault(require("./StyleSet/VideoContent"));

var _VimeoContent = _interopRequireDefault(require("./StyleSet/VimeoContent"));

var _WarningNotification = _interopRequireDefault(require("./StyleSet/WarningNotification"));

var _YouTubeContent = _interopRequireDefault(require("./StyleSet/YouTubeContent"));

var _defaultStyleOptions = _interopRequireDefault(require("./defaultStyleOptions"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

// TODO: [P4] We should add a notice for people who want to use "styleSet" instead of "styleOptions".
//       "styleSet" is actually CSS stylesheet and it is based on the DOM tree.
//       DOM tree may change from time to time, thus, maintaining "styleSet" becomes a constant effort.
function parseBorder(border) {
  var dummyElement = document.createElement('div');
  dummyElement.setAttribute('style', "border: ".concat(border));
  var _dummyElement$style = dummyElement.style,
      color = _dummyElement$style.borderColor,
      style = _dummyElement$style.borderStyle,
      width = _dummyElement$style.borderWidth;
  return {
    color: color,
    style: style,
    width: width
  };
}

var PIXEL_UNIT_PATTERN = /^[0-9]+px$/;

function createStyleSet(options) {
  options = _objectSpread(_objectSpread({}, _defaultStyleOptions.default), options); // Keep this list flat (no nested style) and serializable (no functions)
  // TODO: [P4] Deprecate this code after bump to v5

  var _options = options,
      bubbleBorder = _options.bubbleBorder,
      bubbleFromUserBorder = _options.bubbleFromUserBorder,
      bubbleFromUserNubOffset = _options.bubbleFromUserNubOffset,
      bubbleNubOffset = _options.bubbleNubOffset,
      suggestedActionBorder = _options.suggestedActionBorder,
      suggestedActionDisabledBorder = _options.suggestedActionDisabledBorder;

  if (bubbleBorder) {
    console.warn('botframework-webchat: "styleSet.bubbleBorder" is deprecated and will be removed on or after 2020-07-17. Please use "bubbleBorderColor", "bubbleBorderStyle", and, "bubbleBorderWidth.');

    var _parseBorder = parseBorder(bubbleBorder),
        color = _parseBorder.color,
        style = _parseBorder.style,
        width = _parseBorder.width;

    if (color && color !== 'initial') {
      options.bubbleBorderColor = color;
    }

    if (style && style !== 'initial') {
      options.bubbleBorderStyle = style;
    }

    if (PIXEL_UNIT_PATTERN.test(width)) {
      options.bubbleBorderWidth = parseInt(width, 10);
    }
  }

  if (bubbleFromUserBorder) {
    console.warn('botframework-webchat: "styleSet.bubbleFromUserBorder" is deprecated and will be removed on or after 2020-07-17. Please use "bubbleFromUserBorderColor", "bubbleFromUserBorderStyle", and, "bubbleFromUserBorderWidth".');

    var _parseBorder2 = parseBorder(bubbleFromUserBorder),
        _color = _parseBorder2.color,
        _style = _parseBorder2.style,
        _width = _parseBorder2.width;

    if (_color && _color !== 'initial') {
      options.bubbleFromUserBorderColor = _color;
    }

    if (_style && _style !== 'initial') {
      options.bubbleFromUserBorderStyle = _style;
    }

    if (PIXEL_UNIT_PATTERN.test(_width)) {
      options.bubbleFromUserBorderWidth = parseInt(_width, 10);
    }
  }

  if (suggestedActionBorder) {
    console.warn('botframework-webchat: "styleSet.suggestedActionBorder" is deprecated and will be removed on or after 2020-09-11. Please use "suggestedActionBorderColor", "suggestedActionBorderStyle", and, "suggestedActionBorderWidth".');

    var _parseBorder3 = parseBorder(suggestedActionBorder),
        _color2 = _parseBorder3.color,
        _style2 = _parseBorder3.style,
        _width2 = _parseBorder3.width;

    if (_color2 && _color2 !== 'initial') {
      options.suggestedActionBorderColor = _color2;
    }

    if (_style2 && _style2 !== 'initial') {
      options.suggestedActionBorderStyle = _style2;
    }

    if (PIXEL_UNIT_PATTERN.test(_width2)) {
      options.suggestedActionBorderWidth = parseInt(_width2, 10);
    }
  }

  if (suggestedActionDisabledBorder) {
    console.warn('botframework-webcaht: "styleSet.suggestedActionDisabledBorder" is deprecated and will be removed on or after 2020-09-11. Please use "suggestedActionDisabledBorderColor", "suggestedActionDisabledBorderStyle", and, "suggestedActionDisabledBorderWidth".');

    var _parseBorder4 = parseBorder(suggestedActionDisabledBorder),
        _color3 = _parseBorder4.color,
        _style3 = _parseBorder4.style,
        _width3 = _parseBorder4.width;

    if (_color3 && _color3 !== 'initial') {
      options.suggestedActionDisabledBorderColor = _color3;
    }

    if (_style3 && _style3 !== 'initial') {
      options.suggestedActionDisabledBorderStyle = _style3;
    }

    if (PIXEL_UNIT_PATTERN.test(_width3)) {
      options.suggestedActionDisabledBorderWidth = parseInt(_width3, 10);
    }
  }

  if (bubbleFromUserNubOffset === 'top') {
    options.bubbleFromUserNubOffset = 0;
  } else if (typeof bubbleFromUserNubOffset !== 'number') {
    options.bubbleFromUserNubOffset = -0;
  }

  if (bubbleNubOffset === 'top') {
    options.bubbleNubOffset = 0;
  } else if (typeof bubbleNubOffset !== 'number') {
    options.bubbleNubOffset = -0;
  }

  if (options.emojiSet === true) {
    options.emojiSet = {
      ':)': '😊',
      ':-)': '😊',
      '(:': '😊',
      '(-:': '😊',
      ':-|': '😐',
      ':|': '😐',
      ':-(': '☹️',
      ':(': '☹️',
      ':-D': '😀',
      ':D': '😀',
      ':-p': '😛',
      ':p': '😛',
      ':-P': '😛',
      ':P': '😛',
      ':-o': '😲',
      ':o': '😲',
      ':O': '😲',
      ':-O': '😲',
      ':-0': '😲',
      ':0': '😲',
      ';-)': '😉',
      ';)': '😉',
      '<3': '❤️',
      '</3': '💔',
      '<\\3': '💔'
    };
  } else if (Object.prototype.toString.call(options.emojiSet) !== '[object Object]') {
    console.warn('botframework-webchat: emojiSet must be a boolean or an object with emoticon: emojiValues');
    options.emojiSet = false;
  }

  return {
    activities: (0, _Activities.default)(options),
    activity: (0, _Activity.default)(options),
    audioAttachment: (0, _AudioAttachment.default)(options),
    audioContent: (0, _AudioContent.default)(options),
    avatar: (0, _Avatar.default)(options),
    bubble: (0, _Bubble.default)(options),
    carouselFilmStrip: (0, _CarouselFilmStrip.default)(options),
    carouselFlipper: (0, _CarouselFlipper.default)(options),
    connectivityNotification: (0, _ConnectivityNotification.default)(options),
    dictationInterims: (0, _DictationInterims.default)(options),
    errorBox: (0, _ErrorBox.default)(options),
    errorNotification: (0, _ErrorNotification.default)(options),
    fileContent: (0, _FileContent.default)(options),
    imageAvatar: (0, _ImageAvatar.default)(options),
    initialsAvatar: (0, _InitialsAvatar.default)(options),
    microphoneButton: (0, _MicrophoneButton.default)(options),
    options: _objectSpread(_objectSpread({}, options), {}, {
      suggestedActionsStyleSet: (0, _SuggestedActionsStyleSet.default)(options)
    }),
    root: (0, _Root.default)(options),
    scrollToEndButton: (0, _ScrollToEndButton.default)(options),
    sendBox: (0, _SendBox.default)(options),
    sendBoxButton: (0, _SendBoxButton.default)(options),
    sendBoxTextArea: (0, _SendBoxTextArea.default)(options),
    sendBoxTextBox: (0, _SendBoxTextBox.default)(options),
    sendStatus: (0, _SendStatus.default)(options),
    singleAttachmentActivity: (0, _SingleAttachmentActivity.default)(options),
    spinnerAnimation: (0, _SpinnerAnimation.default)(options),
    stackedLayout: (0, _StackedLayout.default)(options),
    suggestedAction: (0, _SuggestedAction.default)(options),
    suggestedActions: (0, _SuggestedActions.default)(options),
    textContent: (0, _TextContent.default)(options),
    toast: (0, _Toast.default)(options),
    toaster: (0, _Toaster.default)(options),
    typingAnimation: (0, _TypingAnimation.default)(options),
    typingIndicator: (0, _TypingIndicator.default)(options),
    uploadButton: (0, _UploadButton.default)(options),
    videoAttachment: (0, _VideoAttachment.default)(options),
    videoContent: (0, _VideoContent.default)(options),
    vimeoContent: (0, _VimeoContent.default)(options),
    warningNotification: (0, _WarningNotification.default)(options),
    youTubeContent: (0, _YouTubeContent.default)(options)
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9TdHlsZXMvY3JlYXRlU3R5bGVTZXQuanMiXSwibmFtZXMiOlsicGFyc2VCb3JkZXIiLCJib3JkZXIiLCJkdW1teUVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImNvbG9yIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJTdHlsZSIsIndpZHRoIiwiYm9yZGVyV2lkdGgiLCJQSVhFTF9VTklUX1BBVFRFUk4iLCJjcmVhdGVTdHlsZVNldCIsIm9wdGlvbnMiLCJkZWZhdWx0U3R5bGVPcHRpb25zIiwiYnViYmxlQm9yZGVyIiwiYnViYmxlRnJvbVVzZXJCb3JkZXIiLCJidWJibGVGcm9tVXNlck51Yk9mZnNldCIsImJ1YmJsZU51Yk9mZnNldCIsInN1Z2dlc3RlZEFjdGlvbkJvcmRlciIsInN1Z2dlc3RlZEFjdGlvbkRpc2FibGVkQm9yZGVyIiwiY29uc29sZSIsIndhcm4iLCJidWJibGVCb3JkZXJDb2xvciIsImJ1YmJsZUJvcmRlclN0eWxlIiwidGVzdCIsImJ1YmJsZUJvcmRlcldpZHRoIiwicGFyc2VJbnQiLCJidWJibGVGcm9tVXNlckJvcmRlckNvbG9yIiwiYnViYmxlRnJvbVVzZXJCb3JkZXJTdHlsZSIsImJ1YmJsZUZyb21Vc2VyQm9yZGVyV2lkdGgiLCJzdWdnZXN0ZWRBY3Rpb25Cb3JkZXJDb2xvciIsInN1Z2dlc3RlZEFjdGlvbkJvcmRlclN0eWxlIiwic3VnZ2VzdGVkQWN0aW9uQm9yZGVyV2lkdGgiLCJzdWdnZXN0ZWRBY3Rpb25EaXNhYmxlZEJvcmRlckNvbG9yIiwic3VnZ2VzdGVkQWN0aW9uRGlzYWJsZWRCb3JkZXJTdHlsZSIsInN1Z2dlc3RlZEFjdGlvbkRpc2FibGVkQm9yZGVyV2lkdGgiLCJlbW9qaVNldCIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsImFjdGl2aXRpZXMiLCJhY3Rpdml0eSIsImF1ZGlvQXR0YWNobWVudCIsImF1ZGlvQ29udGVudCIsImF2YXRhciIsImJ1YmJsZSIsImNhcm91c2VsRmlsbVN0cmlwIiwiY2Fyb3VzZWxGbGlwcGVyIiwiY29ubmVjdGl2aXR5Tm90aWZpY2F0aW9uIiwiZGljdGF0aW9uSW50ZXJpbXMiLCJlcnJvckJveCIsImVycm9yTm90aWZpY2F0aW9uIiwiZmlsZUNvbnRlbnQiLCJpbWFnZUF2YXRhciIsImluaXRpYWxzQXZhdGFyIiwibWljcm9waG9uZUJ1dHRvbiIsInN1Z2dlc3RlZEFjdGlvbnNTdHlsZVNldCIsInJvb3QiLCJzY3JvbGxUb0VuZEJ1dHRvbiIsInNlbmRCb3giLCJzZW5kQm94QnV0dG9uIiwic2VuZEJveFRleHRBcmVhIiwic2VuZEJveFRleHRCb3giLCJzZW5kU3RhdHVzIiwic2luZ2xlQXR0YWNobWVudEFjdGl2aXR5Iiwic3Bpbm5lckFuaW1hdGlvbiIsInN0YWNrZWRMYXlvdXQiLCJzdWdnZXN0ZWRBY3Rpb24iLCJzdWdnZXN0ZWRBY3Rpb25zIiwidGV4dENvbnRlbnQiLCJ0b2FzdCIsInRvYXN0ZXIiLCJ0eXBpbmdBbmltYXRpb24iLCJ0eXBpbmdJbmRpY2F0b3IiLCJ1cGxvYWRCdXR0b24iLCJ2aWRlb0F0dGFjaG1lbnQiLCJ2aWRlb0NvbnRlbnQiLCJ2aW1lb0NvbnRlbnQiLCJ3YXJuaW5nTm90aWZpY2F0aW9uIiwieW91VHViZUNvbnRlbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7Ozs7Ozs7OztBQUVBO0FBQ0E7QUFDQTtBQUVBLFNB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MkI5RCxPQUEzQixDQXJDWjtBQXNDTCtELElBQUFBLFlBQVksRUFBRSwyQkFBd0IvRCxPQUF4QixDQXRDVDtBQXVDTGdFLElBQUFBLGVBQWUsRUFBRSw4QkFBMkJoRSxPQUEzQixDQXZDWjtBQXdDTGlFLElBQUFBLFlBQVksRUFBRSwyQkFBd0JqRSxPQUF4QixDQXhDVDtBQXlDTGtFLElBQUFBLFlBQVksRUFBRSwyQkFBd0JsRSxPQUF4QixDQXpDVDtBQTBDTG1FLElBQUFBLG1CQUFtQixFQUFFLGtDQUErQm5FLE9BQS9CLENBMUNoQjtBQTJDTG9FLElBQUFBLGNBQWMsRUFBRSw2QkFBMEJwRSxPQUExQjtBQTNDWCxHQUFQO0FBNkNEIiwic291cmNlUm9vdCI6ImNvbXBvbmVudDovLy8iLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBjb21wbGV4aXR5ICovXG5pbXBvcnQgY3JlYXRlQWN0aXZpdGllc1N0eWxlIGZyb20gJy4vU3R5bGVTZXQvQWN0aXZpdGllcyc7XG5pbXBvcnQgY3JlYXRlQWN0aXZpdHlTdHlsZSBmcm9tICcuL1N0eWxlU2V0L0FjdGl2aXR5JztcbmltcG9ydCBjcmVhdGVBdWRpb0F0dGFjaG1lbnRTdHlsZSBmcm9tICcuL1N0eWxlU2V0L0F1ZGlvQXR0YWNobWVudCc7XG5pbXBvcnQgY3JlYXRlQXVkaW9Db250ZW50U3R5bGUgZnJvbSAnLi9TdHlsZVNldC9BdWRpb0NvbnRlbnQnO1xuaW1wb3J0IGNyZWF0ZUF2YXRhclN0eWxlIGZyb20gJy4vU3R5bGVTZXQvQXZhdGFyJztcbmltcG9ydCBjcmVhdGVCdWJibGVTdHlsZSBmcm9tICcuL1N0eWxlU2V0L0J1YmJsZSc7XG5pbXBvcnQgY3JlYXRlQ2Fyb3VzZWxGaWxtU3RyaXAgZnJvbSAnLi9TdHlsZVNldC9DYXJvdXNlbEZpbG1TdHJpcCc7XG5pbXBvcnQgY3JlYXRlQ2Fyb3VzZWxGbGlwcGVyIGZyb20gJy4vU3R5bGVTZXQvQ2Fyb3VzZWxGbGlwcGVyJztcbmltcG9ydCBjcmVhdGVDb25uZWN0aXZpdHlOb3RpZmljYXRpb24gZnJvbSAnLi9TdHlsZVNldC9Db25uZWN0aXZpdHlOb3RpZmljYXRpb24nO1xuaW1wb3J0IGNyZWF0ZURpY3RhdGlvbkludGVyaW1zU3R5bGUgZnJvbSAnLi9TdHlsZVNldC9EaWN0YXRpb25JbnRlcmltcyc7XG5pbXBvcnQgY3JlYXRlRXJyb3JCb3hTdHlsZSBmcm9tICcuL1N0eWxlU2V0L0Vycm9yQm94JztcbmltcG9ydCBjcmVhdGVFcnJvck5vdGlmaWNhdGlvblN0eWxlIGZyb20gJy4vU3R5bGVTZXQvRXJyb3JOb3RpZmljYXRpb24nO1xuaW1wb3J0IGNyZWF0ZUZpbGVDb250ZW50U3R5bGUgZnJvbSAnLi9TdHlsZVNldC9GaWxlQ29udGVudCc7XG5pbXBvcnQgY3JlYXRlSW1hZ2VBdmF0YXJTdHlsZSBmcm9tICcuL1N0eWxlU2V0L0ltYWdlQXZhdGFyJztcbmltcG9ydCBjcmVhdGVJbml0aWFsc0F2YXRhclN0eWxlIGZyb20gJy4vU3R5bGVTZXQvSW5pdGlhbHNBdmF0YXInO1xuaW1wb3J0IGNyZWF0ZU1pY3JvcGhvbmVCdXR0b25TdHlsZSBmcm9tICcuL1N0eWxlU2V0L01pY3JvcGhvbmVCdXR0b24nO1xuaW1wb3J0IGNyZWF0ZVJvb3RTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1Jvb3QnO1xuaW1wb3J0IGNyZWF0ZVNjcm9sbFRvRW5kQnV0dG9uU3R5bGUgZnJvbSAnLi9TdHlsZVNldC9TY3JvbGxUb0VuZEJ1dHRvbic7XG5pbXBvcnQgY3JlYXRlU2VuZEJveEJ1dHRvblN0eWxlIGZyb20gJy4vU3R5bGVTZXQvU2VuZEJveEJ1dHRvbic7XG5pbXBvcnQgY3JlYXRlU2VuZEJveFN0eWxlIGZyb20gJy4vU3R5bGVTZXQvU2VuZEJveCc7XG5pbXBvcnQgY3JlYXRlU2VuZEJveFRleHRBcmVhU3R5bGUgZnJvbSAnLi9TdHlsZVNldC9TZW5kQm94VGV4dEFyZWEnO1xuaW1wb3J0IGNyZWF0ZVNlbmRCb3hUZXh0Qm94U3R5bGUgZnJvbSAnLi9TdHlsZVNldC9TZW5kQm94VGV4dEJveCc7XG5pbXBvcnQgY3JlYXRlU2VuZFN0YXR1c1N0eWxlIGZyb20gJy4vU3R5bGVTZXQvU2VuZFN0YXR1cyc7XG5pbXBvcnQgY3JlYXRlU2luZ2xlQXR0YWNobWVudEFjdGl2aXR5U3R5bGUgZnJvbSAnLi9TdHlsZVNldC9TaW5nbGVBdHRhY2htZW50QWN0aXZpdHknO1xuaW1wb3J0IGNyZWF0ZVNwaW5uZXJBbmltYXRpb25TdHlsZSBmcm9tICcuL1N0eWxlU2V0L1NwaW5uZXJBbmltYXRpb24nO1xuaW1wb3J0IGNyZWF0ZVN0YWNrZWRMYXlvdXRTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1N0YWNrZWRMYXlvdXQnO1xuaW1wb3J0IGNyZWF0ZVN1Z2dlc3RlZEFjdGlvbnNTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1N1Z2dlc3RlZEFjdGlvbnMnO1xuaW1wb3J0IGNyZWF0ZVN1Z2dlc3RlZEFjdGlvbnNTdHlsZVNldCBmcm9tICcuL1N0eWxlU2V0L1N1Z2dlc3RlZEFjdGlvbnNTdHlsZVNldCc7XG5pbXBvcnQgY3JlYXRlU3VnZ2VzdGVkQWN0aW9uU3R5bGUgZnJvbSAnLi9TdHlsZVNldC9TdWdnZXN0ZWRBY3Rpb24nO1xuaW1wb3J0IGNyZWF0ZVRleHRDb250ZW50U3R5bGUgZnJvbSAnLi9TdHlsZVNldC9UZXh0Q29udGVudCc7XG5pbXBvcnQgY3JlYXRlVG9hc3RlclN0eWxlIGZyb20gJy4vU3R5bGVTZXQvVG9hc3Rlcic7XG5pbXBvcnQgY3JlYXRlVG9hc3RTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1RvYXN0JztcbmltcG9ydCBjcmVhdGVUeXBpbmdBbmltYXRpb25TdHlsZSBmcm9tICcuL1N0eWxlU2V0L1R5cGluZ0FuaW1hdGlvbic7XG5pbXBvcnQgY3JlYXRlVHlwaW5nSW5kaWNhdG9yU3R5bGUgZnJvbSAnLi9TdHlsZVNldC9UeXBpbmdJbmRpY2F0b3InO1xuaW1wb3J0IGNyZWF0ZVVwbG9hZEJ1dHRvblN0eWxlIGZyb20gJy4vU3R5bGVTZXQvVXBsb2FkQnV0dG9uJztcbmltcG9ydCBjcmVhdGVWaWRlb0F0dGFjaG1lbnRTdHlsZSBmcm9tICcuL1N0eWxlU2V0L1ZpZGVvQXR0YWNobWVudCc7XG5pbXBvcnQgY3JlYXRlVmlkZW9Db250ZW50U3R5bGUgZnJvbSAnLi9TdHlsZVNldC9WaWRlb0NvbnRlbnQnO1xuaW1wb3J0IGNyZWF0ZVZpbWVvQ29udGVudFN0eWxlIGZyb20gJy4vU3R5bGVTZXQvVmltZW9Db250ZW50JztcbmltcG9ydCBjcmVhdGVXYXJuaW5nTm90aWZpY2F0aW9uU3R5bGUgZnJvbSAnLi9TdHlsZVNldC9XYXJuaW5nTm90aWZpY2F0aW9uJztcbmltcG9ydCBjcmVhdGVZb3VUdWJlQ29udGVudFN0eWxlIGZyb20gJy4vU3R5bGVTZXQvWW91VHViZUNvbnRlbnQnO1xuXG5pbXBvcnQgZGVmYXVsdFN0eWxlT3B0aW9ucyBmcm9tICcuL2RlZmF1bHRTdHlsZU9wdGlvbnMnO1xuXG4vLyBUT0RPOiBbUDRdIFdlIHNob3VsZCBhZGQgYSBub3RpY2UgZm9yIHBlb3BsZSB3aG8gd2FudCB0byB1c2UgXCJzdHlsZVNldFwiIGluc3RlYWQgb2YgXCJzdHlsZU9wdGlvbnNcIi5cbi8vICAgICAgIFwic3R5bGVTZXRcIiBpcyBhY3R1YWxseSBDU1Mgc3R5bGVzaGVldCBhbmQgaXQgaXMgYmFzZWQgb24gdGhlIERPTSB0cmVlLlxuLy8gICAgICAgRE9NIHRyZWUgbWF5IGNoYW5nZSBmcm9tIHRpbWUgdG8gdGltZSwgdGh1cywgbWFpbnRhaW5pbmcgXCJzdHlsZVNldFwiIGJlY29tZXMgYSBjb25zdGFudCBlZmZvcnQuXG5cbmZ1bmN0aW9uIHBhcnNlQm9yZGVyKGJvcmRlcikge1xuICBjb25zdCBkdW1teUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICBkdW1teUVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIGBib3JkZXI6ICR7Ym9yZGVyfWApO1xuXG4gIGNvbnN0IHtcbiAgICBzdHlsZTogeyBib3JkZXJDb2xvcjogY29sb3IsIGJvcmRlclN0eWxlOiBzdHlsZSwgYm9yZGVyV2lkdGg6IHdpZHRoIH1cbiAgfSA9IGR1bW15RWxlbWVudDtcblxuICByZXR1cm4ge1xuICAgIGNvbG9yLFxuICAgIHN0eWxlLFxuICAgIHdpZHRoXG4gIH07XG59XG5cbmNvbnN0IFBJWEVMX1VOSVRfUEFUVEVSTiA9IC9eXFxkK3B4JC91O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVTdHlsZVNldChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSB7IC4uLmRlZmF1bHRTdHlsZU9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcblxuICAvLyBLZWVwIHRoaXMgbGlzdCBmbGF0IChubyBuZXN0ZWQgc3R5bGUpIGFuZCBzZXJpYWxpemFibGUgKG5vIGZ1bmN0aW9ucylcblxuICAvLyBUT0RPOiBbUDRdIERlcHJlY2F0ZSB0aGlzIGNvZGUgYWZ0ZXIgYnVtcCB0byB2NVxuICBjb25zdCB7XG4gICAgYnViYmxlQm9yZGVyLFxuICAgIGJ1YmJsZUZyb21Vc2VyQm9yZGVyLFxuICAgIGJ1YmJsZUZyb21Vc2VyTnViT2Zmc2V0LFxuICAgIGJ1YmJsZU51Yk9mZnNldCxcbiAgICBzdWdnZXN0ZWRBY3Rpb25Cb3JkZXIsXG4gICAgc3VnZ2VzdGVkQWN0aW9uRGlzYWJsZWRCb3JkZXJcbiAgfSA9IG9wdGlvbnM7XG5cbiAgaWYgKGJ1YmJsZUJvcmRlcikge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgICdib3RmcmFtZXdvcmstd2ViY2hhdDogXCJzdHlsZVNldC5idWJibGVCb3JkZXJcIiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgb24gb3IgYWZ0ZXIgMjAyMC0wNy0xNy4gUGxlYXNlIHVzZSBcImJ1YmJsZUJvcmRlckNvbG9yXCIsIFwiYnViYmxlQm9yZGVyU3R5bGVcIiwgYW5kLCBcImJ1YmJsZUJvcmRlcldpZHRoLidcbiAgICApO1xuXG4gICAgY29uc3QgeyBjb2xvciwgc3R5bGUsIHdpZHRoIH0gPSBwYXJzZUJvcmRlcihidWJibGVCb3JkZXIpO1xuXG4gICAgaWYgKGNvbG9yICYmIGNvbG9yICE9PSAnaW5pdGlhbCcpIHtcbiAgICAgIG9wdGlvbnMuYnViYmxlQm9yZGVyQ29sb3IgPSBjb2xvcjtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGUgJiYgc3R5bGUgIT09ICdpbml0aWFsJykge1xuICAgICAgb3B0aW9ucy5idWJibGVCb3JkZXJTdHlsZSA9IHN0eWxlO1xuICAgIH1cblxuICAgIGlmIChQSVhFTF9VTklUX1BBVFRFUk4udGVzdCh3aWR0aCkpIHtcbiAgICAgIG9wdGlvbnMuYnViYmxlQm9yZGVyV2lkdGggPSBwYXJzZUludCh3aWR0aCwgMTApO1xuICAgIH1cbiAgfVxuXG4gIGlmIChidWJibGVGcm9tVXNlckJvcmRlcikge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgICdib3RmcmFtZXdvcmstd2ViY2hhdDogXCJzdHlsZVNldC5idWJibGVGcm9tVXNlckJvcmRlclwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBvbiBvciBhZnRlciAyMDIwLTA3LTE3LiBQbGVhc2UgdXNlIFwiYnViYmxlRnJvbVVzZXJCb3JkZXJDb2xvclwiLCBcImJ1YmJsZUZyb21Vc2VyQm9yZGVyU3R5bGVcIiwgYW5kLCBcImJ1YmJsZUZyb21Vc2VyQm9yZGVyV2lkdGhcIi4nXG4gICAgKTtcblxuICAgIGNvbnN0IHsgY29sb3IsIHN0eWxlLCB3aWR0aCB9ID0gcGFyc2VCb3JkZXIoYnViYmxlRnJvbVVzZXJCb3JkZXIpO1xuXG4gICAgaWYgKGNvbG9yICYmIGNvbG9yICE9PSAnaW5pdGlhbCcpIHtcbiAgICAgIG9wdGlvbnMuYnViYmxlRnJvbVVzZXJCb3JkZXJDb2xvciA9IGNvbG9yO1xuICAgIH1cblxuICAgIGlmIChzdHlsZSAmJiBzdHlsZSAhPT0gJ2luaXRpYWwnKSB7XG4gICAgICBvcHRpb25zLmJ1YmJsZUZyb21Vc2VyQm9yZGVyU3R5bGUgPSBzdHlsZTtcbiAgICB9XG5cbiAgICBpZiAoUElYRUxfVU5JVF9QQVRURVJOLnRlc3Qod2lkdGgpKSB7XG4gICAgICBvcHRpb25zLmJ1YmJsZUZyb21Vc2VyQm9yZGVyV2lkdGggPSBwYXJzZUludCh3aWR0aCwgMTApO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdWdnZXN0ZWRBY3Rpb25Cb3JkZXIpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICAnYm90ZnJhbWV3b3JrLXdlYmNoYXQ6IFwic3R5bGVTZXQuc3VnZ2VzdGVkQWN0aW9uQm9yZGVyXCIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIG9uIG9yIGFmdGVyIDIwMjAtMDktMTEuIFBsZWFzZSB1c2UgXCJzdWdnZXN0ZWRBY3Rpb25Cb3JkZXJDb2xvclwiLCBcInN1Z2dlc3RlZEFjdGlvbkJvcmRlclN0eWxlXCIsIGFuZCwgXCJzdWdnZXN0ZWRBY3Rpb25Cb3JkZXJXaWR0aFwiLidcbiAgICApO1xuXG4gICAgY29uc3QgeyBjb2xvciwgc3R5bGUsIHdpZHRoIH0gPSBwYXJzZUJvcmRlcihzdWdnZXN0ZWRBY3Rpb25Cb3JkZXIpO1xuXG4gICAgaWYgKGNvbG9yICYmIGNvbG9yICE9PSAnaW5pdGlhbCcpIHtcbiAgICAgIG9wdGlvbnMuc3VnZ2VzdGVkQWN0aW9uQm9yZGVyQ29sb3IgPSBjb2xvcjtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGUgJiYgc3R5bGUgIT09ICdpbml0aWFsJykge1xuICAgICAgb3B0aW9ucy5zdWdnZXN0ZWRBY3Rpb25Cb3JkZXJTdHlsZSA9IHN0eWxlO1xuICAgIH1cblxuICAgIGlmIChQSVhFTF9VTklUX1BBVFRFUk4udGVzdCh3aWR0aCkpIHtcbiAgICAgIG9wdGlvbnMuc3VnZ2VzdGVkQWN0aW9uQm9yZGVyV2lkdGggPSBwYXJzZUludCh3aWR0aCwgMTApO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdWdnZXN0ZWRBY3Rpb25EaXNhYmxlZEJvcmRlcikge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgICdib3RmcmFtZXdvcmstd2ViY2FodDogXCJzdHlsZVNldC5zdWdnZXN0ZWRBY3Rpb25EaXNhYmxlZEJvcmRlclwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBvbiBvciBhZnRlciAyMDIwLTA5LTExLiBQbGVhc2UgdXNlIFwic3VnZ2VzdGVkQWN0aW9uRGlzYWJsZWRCb3JkZXJDb2xvclwiLCBcInN1Z2dlc3RlZEFjdGlvbkRpc2FibGVkQm9yZGVyU3R5bGVcIiwgYW5kLCBcInN1Z2dlc3RlZEFjdGlvbkRpc2FibGVkQm9yZGVyV2lkdGhcIi4nXG4gICAgKTtcblxuICAgIGNvbnN0IHsgY29sb3IsIHN0eWxlLCB3aWR0aCB9ID0gcGFyc2VCb3JkZXIoc3VnZ2VzdGVkQWN0aW9uRGlzYWJsZWRCb3JkZXIpO1xuXG4gICAgaWYgKGNvbG9yICYmIGNvbG9yICE9PSAnaW5pdGlhbCcpIHtcbiAgICAgIG9wdGlvbnMuc3VnZ2VzdGVkQWN0aW9uRGlzYWJsZWRCb3JkZXJDb2xvciA9IGNvbG9yO1xuICAgIH1cblxuICAgIGlmIChzdHlsZSAmJiBzdHlsZSAhPT0gJ2luaXRpYWwnKSB7XG4gICAgICBvcHRpb25zLnN1Z2dlc3RlZEFjdGlvbkRpc2FibGVkQm9yZGVyU3R5bGUgPSBzdHlsZTtcbiAgICB9XG5cbiAgICBpZiAoUElYRUxfVU5JVF9QQVRURVJOLnRlc3Qod2lkdGgpKSB7XG4gICAgICBvcHRpb25zLnN1Z2dlc3RlZEFjdGlvbkRpc2FibGVkQm9yZGVyV2lkdGggPSBwYXJzZUludCh3aWR0aCwgMTApO1xuICAgIH1cbiAgfVxuXG4gIGlmIChidWJibGVGcm9tVXNlck51Yk9mZnNldCA9PT0gJ3RvcCcpIHtcbiAgICBvcHRpb25zLmJ1YmJsZUZyb21Vc2VyTnViT2Zmc2V0ID0gMDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYnViYmxlRnJvbVVzZXJOdWJPZmZzZXQgIT09ICdudW1iZXInKSB7XG4gICAgb3B0aW9ucy5idWJibGVGcm9tVXNlck51Yk9mZnNldCA9IC0wO1xuICB9XG5cbiAgaWYgKGJ1YmJsZU51Yk9mZnNldCA9PT0gJ3RvcCcpIHtcbiAgICBvcHRpb25zLmJ1YmJsZU51Yk9mZnNldCA9IDA7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGJ1YmJsZU51Yk9mZnNldCAhPT0gJ251bWJlcicpIHtcbiAgICBvcHRpb25zLmJ1YmJsZU51Yk9mZnNldCA9IC0wO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuZW1vamlTZXQgPT09IHRydWUpIHtcbiAgICBvcHRpb25zLmVtb2ppU2V0ID0ge1xuICAgICAgJzopJzogJ/CfmIonLFxuICAgICAgJzotKSc6ICfwn5iKJyxcbiAgICAgICcoOic6ICfwn5iKJyxcbiAgICAgICcoLTonOiAn8J+YiicsXG4gICAgICAnOi18JzogJ/CfmJAnLFxuICAgICAgJzp8JzogJ/CfmJAnLFxuICAgICAgJzotKCc6ICfimLnvuI8nLFxuICAgICAgJzooJzogJ+KYue+4jycsXG4gICAgICAnOi1EJzogJ/CfmIAnLFxuICAgICAgJzpEJzogJ/CfmIAnLFxuICAgICAgJzotcCc6ICfwn5ibJyxcbiAgICAgICc6cCc6ICfwn5ibJyxcbiAgICAgICc6LVAnOiAn8J+YmycsXG4gICAgICAnOlAnOiAn8J+YmycsXG4gICAgICAnOi1vJzogJ/CfmLInLFxuICAgICAgJzpvJzogJ/CfmLInLFxuICAgICAgJzpPJzogJ/CfmLInLFxuICAgICAgJzotTyc6ICfwn5iyJyxcbiAgICAgICc6LTAnOiAn8J+YsicsXG4gICAgICAnOjAnOiAn8J+YsicsXG4gICAgICAnOy0pJzogJ/CfmIknLFxuICAgICAgJzspJzogJ/CfmIknLFxuICAgICAgJzwzJzogJ+KdpO+4jycsXG4gICAgICAnPC8zJzogJ/CfkpQnLFxuICAgICAgJzxcXFxcMyc6ICfwn5KUJ1xuICAgIH07XG4gIH0gZWxzZSBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9wdGlvbnMuZW1vamlTZXQpICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgIGNvbnNvbGUud2FybignYm90ZnJhbWV3b3JrLXdlYmNoYXQ6IGVtb2ppU2V0IG11c3QgYmUgYSBib29sZWFuIG9yIGFuIG9iamVjdCB3aXRoIGVtb3RpY29uOiBlbW9qaVZhbHVlcycpO1xuICAgIG9wdGlvbnMuZW1vamlTZXQgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYWN0aXZpdGllczogY3JlYXRlQWN0aXZpdGllc1N0eWxlKG9wdGlvbnMpLFxuICAgIGFjdGl2aXR5OiBjcmVhdGVBY3Rpdml0eVN0eWxlKG9wdGlvbnMpLFxuICAgIGF1ZGlvQXR0YWNobWVudDogY3JlYXRlQXVkaW9BdHRhY2htZW50U3R5bGUob3B0aW9ucyksXG4gICAgYXVkaW9Db250ZW50OiBjcmVhdGVBdWRpb0NvbnRlbnRTdHlsZShvcHRpb25zKSxcbiAgICBhdmF0YXI6IGNyZWF0ZUF2YXRhclN0eWxlKG9wdGlvbnMpLFxuICAgIGJ1YmJsZTogY3JlYXRlQnViYmxlU3R5bGUob3B0aW9ucyksXG4gICAgY2Fyb3VzZWxGaWxtU3RyaXA6IGNyZWF0ZUNhcm91c2VsRmlsbVN0cmlwKG9wdGlvbnMpLFxuICAgIGNhcm91c2VsRmxpcHBlcjogY3JlYXRlQ2Fyb3VzZWxGbGlwcGVyKG9wdGlvbnMpLFxuICAgIGNvbm5lY3Rpdml0eU5vdGlmaWNhdGlvbjogY3JlYXRlQ29ubmVjdGl2aXR5Tm90aWZpY2F0aW9uKG9wdGlvbnMpLFxuICAgIGRpY3RhdGlvbkludGVyaW1zOiBjcmVhdGVEaWN0YXRpb25JbnRlcmltc1N0eWxlKG9wdGlvbnMpLFxuICAgIGVycm9yQm94OiBjcmVhdGVFcnJvckJveFN0eWxlKG9wdGlvbnMpLFxuICAgIGVycm9yTm90aWZpY2F0aW9uOiBjcmVhdGVFcnJvck5vdGlmaWNhdGlvblN0eWxlKG9wdGlvbnMpLFxuICAgIGZpbGVDb250ZW50OiBjcmVhdGVGaWxlQ29udGVudFN0eWxlKG9wdGlvbnMpLFxuICAgIGltYWdlQXZhdGFyOiBjcmVhdGVJbWFnZUF2YXRhclN0eWxlKG9wdGlvbnMpLFxuICAgIGluaXRpYWxzQXZhdGFyOiBjcmVhdGVJbml0aWFsc0F2YXRhclN0eWxlKG9wdGlvbnMpLFxuICAgIG1pY3JvcGhvbmVCdXR0b246IGNyZWF0ZU1pY3JvcGhvbmVCdXR0b25TdHlsZShvcHRpb25zKSxcbiAgICBvcHRpb25zOiB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgc3VnZ2VzdGVkQWN0aW9uc1N0eWxlU2V0OiBjcmVhdGVTdWdnZXN0ZWRBY3Rpb25zU3R5bGVTZXQob3B0aW9ucylcbiAgICB9LFxuICAgIHJvb3Q6IGNyZWF0ZVJvb3RTdHlsZShvcHRpb25zKSxcbiAgICBzY3JvbGxUb0VuZEJ1dHRvbjogY3JlYXRlU2Nyb2xsVG9FbmRCdXR0b25TdHlsZShvcHRpb25zKSxcbiAgICBzZW5kQm94OiBjcmVhdGVTZW5kQm94U3R5bGUob3B0aW9ucyksXG4gICAgc2VuZEJveEJ1dHRvbjogY3JlYXRlU2VuZEJveEJ1dHRvblN0eWxlKG9wdGlvbnMpLFxuICAgIHNlbmRCb3hUZXh0QXJlYTogY3JlYXRlU2VuZEJveFRleHRBcmVhU3R5bGUob3B0aW9ucyksXG4gICAgc2VuZEJveFRleHRCb3g6IGNyZWF0ZVNlbmRCb3hUZXh0Qm94U3R5bGUob3B0aW9ucyksXG4gICAgc2VuZFN0YXR1czogY3JlYXRlU2VuZFN0YXR1c1N0eWxlKG9wdGlvbnMpLFxuICAgIHNpbmdsZUF0dGFjaG1lbnRBY3Rpdml0eTogY3JlYXRlU2luZ2xlQXR0YWNobWVudEFjdGl2aXR5U3R5bGUob3B0aW9ucyksXG4gICAgc3Bpbm5lckFuaW1hdGlvbjogY3JlYXRlU3Bpbm5lckFuaW1hdGlvblN0eWxlKG9wdGlvbnMpLFxuICAgIHN0YWNrZWRMYXlvdXQ6IGNyZWF0ZVN0YWNrZWRMYXlvdXRTdHlsZShvcHRpb25zKSxcbiAgICBzdWdnZXN0ZWRBY3Rpb246IGNyZWF0ZVN1Z2dlc3RlZEFjdGlvblN0eWxlKG9wdGlvbnMpLFxuICAgIHN1Z2dlc3RlZEFjdGlvbnM6IGNyZWF0ZVN1Z2dlc3RlZEFjdGlvbnNTdHlsZShvcHRpb25zKSxcbiAgICB0ZXh0Q29udGVudDogY3JlYXRlVGV4dENvbnRlbnRTdHlsZShvcHRpb25zKSxcbiAgICB0b2FzdDogY3JlYXRlVG9hc3RTdHlsZShvcHRpb25zKSxcbiAgICB0b2FzdGVyOiBjcmVhdGVUb2FzdGVyU3R5bGUob3B0aW9ucyksXG4gICAgdHlwaW5nQW5pbWF0aW9uOiBjcmVhdGVUeXBpbmdBbmltYXRpb25TdHlsZShvcHRpb25zKSxcbiAgICB0eXBpbmdJbmRpY2F0b3I6IGNyZWF0ZVR5cGluZ0luZGljYXRvclN0eWxlKG9wdGlvbnMpLFxuICAgIHVwbG9hZEJ1dHRvbjogY3JlYXRlVXBsb2FkQnV0dG9uU3R5bGUob3B0aW9ucyksXG4gICAgdmlkZW9BdHRhY2htZW50OiBjcmVhdGVWaWRlb0F0dGFjaG1lbnRTdHlsZShvcHRpb25zKSxcbiAgICB2aWRlb0NvbnRlbnQ6IGNyZWF0ZVZpZGVvQ29udGVudFN0eWxlKG9wdGlvbnMpLFxuICAgIHZpbWVvQ29udGVudDogY3JlYXRlVmltZW9Db250ZW50U3R5bGUob3B0aW9ucyksXG4gICAgd2FybmluZ05vdGlmaWNhdGlvbjogY3JlYXRlV2FybmluZ05vdGlmaWNhdGlvblN0eWxlKG9wdGlvbnMpLFxuICAgIHlvdVR1YmVDb250ZW50OiBjcmVhdGVZb3VUdWJlQ29udGVudFN0eWxlKG9wdGlvbnMpXG4gIH07XG59XG4iXX0=