"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createAttachmentRenderer;

var _react = _interopRequireDefault(require("react"));

var _concatMiddleware = _interopRequireDefault(require("./concatMiddleware"));

var _createCoreMiddleware = _interopRequireDefault(require("./Attachment/createCoreMiddleware"));

var _ErrorBox = _interopRequireDefault(require("../ErrorBox"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint no-magic-numbers: ["error", { "ignore": [2] }] */
function createAttachmentRenderer(additionalMiddleware) {
  var attachmentMiddleware = (0, _concatMiddleware.default)(additionalMiddleware, (0, _createCoreMiddleware.default)())({});
  return function () {
    try {
      return attachmentMiddleware(function (_ref) {
        var attachment = _ref.attachment;
        return /*#__PURE__*/_react.default.createElement(_ErrorBox.default, {
          message: "No renderer for this attachment"
        }, /*#__PURE__*/_react.default.createElement("pre", null, JSON.stringify(attachment, null, 2)));
      }).apply(void 0, arguments);
    } catch (err) {
      return /*#__PURE__*/_react.default.createElement(_ErrorBox.default, {
        error: err,
        message: "Failed to render attachment"
      }, /*#__PURE__*/_react.default.createElement("pre", null, JSON.stringify(err, null, 2)));
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9NaWRkbGV3YXJlL2NyZWF0ZUF0dGFjaG1lbnRSZW5kZXJlci5qcyJdLCJuYW1lcyI6WyJjcmVhdGVBdHRhY2htZW50UmVuZGVyZXIiLCJhZGRpdGlvbmFsTWlkZGxld2FyZSIsImF0dGFjaG1lbnRNaWRkbGV3YXJlIiwiYXR0YWNobWVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUxBO0FBT2UsU0FBU0Esd0JBQVQsQ0FBa0NDLG9CQUFsQyxFQUF3RDtBQUNyRSxNQUFNQyxvQkFBb0IsR0FBRywrQkFBaUJELG9CQUFqQixFQUF1QyxvQ0FBdkMsRUFBeUUsRUFBekUsQ0FBN0I7QUFFQSxTQUFPLFlBQWE7QUFDbEIsUUFBSTtBQUNGLGFBQU9DLG9CQUFvQixDQUFDO0FBQUEsWUFBR0MsVUFBSCxRQUFHQSxVQUFIO0FBQUEsNEJBQzFCLDZCQUFDLGlCQUFEO0FBQVUsVUFBQSxPQUFPLEVBQUM7QUFBbEIsd0JBQ0UsMENBQU1DLElBQUksQ0FBQ0MsU0FBTCxDQUFlRixVQUFmLEVBQTJCLElBQTNCLEVBQWlDLENBQWpDLENBQU4sQ0FERixDQUQwQjtBQUFBLE9BQUQsQ0FBcEIseUJBQVA7QUFLRCxLQU5ELENBTUUsT0FBT0csR0FBUCxFQUFZO0FBQ1osMEJBQ0UsNkJBQUMsaUJBQUQ7QUFBVSxRQUFBLEtBQUssRUFBRUEsR0FBakI7QUFBc0IsUUFBQSxPQUFPLEVBQUM7QUFBOUIsc0JBQ0UsMENBQU1GLElBQUksQ0FBQ0MsU0FBTCxDQUFlQyxHQUFmLEVBQW9CLElBQXBCLEVBQTBCLENBQTFCLENBQU4sQ0FERixDQURGO0FBS0Q7QUFDRixHQWREO0FBZUQiLCJzb3VyY2VSb290IjoiY29tcG9uZW50Oi8vLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludCBuby1tYWdpYy1udW1iZXJzOiBbXCJlcnJvclwiLCB7IFwiaWdub3JlXCI6IFsyXSB9XSAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNvbmNhdE1pZGRsZXdhcmUgZnJvbSAnLi9jb25jYXRNaWRkbGV3YXJlJztcbmltcG9ydCBjcmVhdGVDb3JlQXR0YWNobWVudE1pZGRsZXdhcmUgZnJvbSAnLi9BdHRhY2htZW50L2NyZWF0ZUNvcmVNaWRkbGV3YXJlJztcbmltcG9ydCBFcnJvckJveCBmcm9tICcuLi9FcnJvckJveCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUF0dGFjaG1lbnRSZW5kZXJlcihhZGRpdGlvbmFsTWlkZGxld2FyZSkge1xuICBjb25zdCBhdHRhY2htZW50TWlkZGxld2FyZSA9IGNvbmNhdE1pZGRsZXdhcmUoYWRkaXRpb25hbE1pZGRsZXdhcmUsIGNyZWF0ZUNvcmVBdHRhY2htZW50TWlkZGxld2FyZSgpKSh7fSk7XG5cbiAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhdHRhY2htZW50TWlkZGxld2FyZSgoeyBhdHRhY2htZW50IH0pID0+IChcbiAgICAgICAgPEVycm9yQm94IG1lc3NhZ2U9XCJObyByZW5kZXJlciBmb3IgdGhpcyBhdHRhY2htZW50XCI+XG4gICAgICAgICAgPHByZT57SlNPTi5zdHJpbmdpZnkoYXR0YWNobWVudCwgbnVsbCwgMil9PC9wcmU+XG4gICAgICAgIDwvRXJyb3JCb3g+XG4gICAgICApKSguLi5hcmdzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxFcnJvckJveCBlcnJvcj17ZXJyfSBtZXNzYWdlPVwiRmFpbGVkIHRvIHJlbmRlciBhdHRhY2htZW50XCI+XG4gICAgICAgICAgPHByZT57SlNPTi5zdHJpbmdpZnkoZXJyLCBudWxsLCAyKX08L3ByZT5cbiAgICAgICAgPC9FcnJvckJveD5cbiAgICAgICk7XG4gICAgfVxuICB9O1xufVxuIl19