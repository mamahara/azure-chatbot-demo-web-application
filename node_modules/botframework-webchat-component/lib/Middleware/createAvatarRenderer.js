"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createAvatarRenderer;

var _react = _interopRequireDefault(require("react"));

var _concatMiddleware = _interopRequireDefault(require("./concatMiddleware"));

var _createCoreMiddleware = _interopRequireDefault(require("./Avatar/createCoreMiddleware"));

var _ErrorBox = _interopRequireDefault(require("../ErrorBox"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint no-magic-numbers: ["error", { "ignore": [2] }] */
function createAvatarRenderer(additionalMiddleware) {
  var avatarMiddleware = (0, _concatMiddleware.default)(additionalMiddleware, (0, _createCoreMiddleware.default)())({});
  return function () {
    try {
      return avatarMiddleware(function () {
        return false;
      }).apply(void 0, arguments);
    } catch (err) {
      var message = err.message,
          stack = err.stack;
      console.error({
        message: message,
        stack: stack
      });
      return /*#__PURE__*/_react.default.createElement(_ErrorBox.default, {
        error: err,
        message: "Failed to render avatar"
      }, /*#__PURE__*/_react.default.createElement("pre", null, JSON.stringify({
        message: message,
        stack: stack
      }, null, 2)));
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9NaWRkbGV3YXJlL2NyZWF0ZUF2YXRhclJlbmRlcmVyLmpzIl0sIm5hbWVzIjpbImNyZWF0ZUF2YXRhclJlbmRlcmVyIiwiYWRkaXRpb25hbE1pZGRsZXdhcmUiLCJhdmF0YXJNaWRkbGV3YXJlIiwiZXJyIiwibWVzc2FnZSIsInN0YWNrIiwiY29uc29sZSIsImVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBTEE7QUFPZSxTQUFTQSxvQkFBVCxDQUE4QkMsb0JBQTlCLEVBQW9EO0FBQ2pFLE1BQU1DLGdCQUFnQixHQUFHLCtCQUFpQkQsb0JBQWpCLEVBQXVDLG9DQUF2QyxFQUFxRSxFQUFyRSxDQUF6QjtBQUVBLFNBQU8sWUFBYTtBQUNsQixRQUFJO0FBQ0YsYUFBT0MsZ0JBQWdCLENBQUM7QUFBQSxlQUFNLEtBQU47QUFBQSxPQUFELENBQWhCLHlCQUFQO0FBQ0QsS0FGRCxDQUVFLE9BQU9DLEdBQVAsRUFBWTtBQUFBLFVBQ0pDLE9BREksR0FDZUQsR0FEZixDQUNKQyxPQURJO0FBQUEsVUFDS0MsS0FETCxHQUNlRixHQURmLENBQ0tFLEtBREw7QUFHWkMsTUFBQUEsT0FBTyxDQUFDQyxLQUFSLENBQWM7QUFBRUgsUUFBQUEsT0FBTyxFQUFQQSxPQUFGO0FBQVdDLFFBQUFBLEtBQUssRUFBTEE7QUFBWCxPQUFkO0FBRUEsMEJBQ0UsNkJBQUMsaUJBQUQ7QUFBVSxRQUFBLEtBQUssRUFBRUYsR0FBakI7QUFBc0IsUUFBQSxPQUFPLEVBQUM7QUFBOUIsc0JBQ0UsMENBQU1LLElBQUksQ0FBQ0MsU0FBTCxDQUFlO0FBQUVMLFFBQUFBLE9BQU8sRUFBUEEsT0FBRjtBQUFXQyxRQUFBQSxLQUFLLEVBQUxBO0FBQVgsT0FBZixFQUFtQyxJQUFuQyxFQUF5QyxDQUF6QyxDQUFOLENBREYsQ0FERjtBQUtEO0FBQ0YsR0FkRDtBQWVEIiwic291cmNlUm9vdCI6ImNvbXBvbmVudDovLy8iLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQgbm8tbWFnaWMtbnVtYmVyczogW1wiZXJyb3JcIiwgeyBcImlnbm9yZVwiOiBbMl0gfV0gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjb25jYXRNaWRkbGV3YXJlIGZyb20gJy4vY29uY2F0TWlkZGxld2FyZSc7XG5pbXBvcnQgY3JlYXRlQ29yZUF2YXRhck1pZGRsZXdhcmUgZnJvbSAnLi9BdmF0YXIvY3JlYXRlQ29yZU1pZGRsZXdhcmUnO1xuaW1wb3J0IEVycm9yQm94IGZyb20gJy4uL0Vycm9yQm94JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlQXZhdGFyUmVuZGVyZXIoYWRkaXRpb25hbE1pZGRsZXdhcmUpIHtcbiAgY29uc3QgYXZhdGFyTWlkZGxld2FyZSA9IGNvbmNhdE1pZGRsZXdhcmUoYWRkaXRpb25hbE1pZGRsZXdhcmUsIGNyZWF0ZUNvcmVBdmF0YXJNaWRkbGV3YXJlKCkpKHt9KTtcblxuICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF2YXRhck1pZGRsZXdhcmUoKCkgPT4gZmFsc2UpKC4uLmFyZ3MpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc3QgeyBtZXNzYWdlLCBzdGFjayB9ID0gZXJyO1xuXG4gICAgICBjb25zb2xlLmVycm9yKHsgbWVzc2FnZSwgc3RhY2sgfSk7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxFcnJvckJveCBlcnJvcj17ZXJyfSBtZXNzYWdlPVwiRmFpbGVkIHRvIHJlbmRlciBhdmF0YXJcIj5cbiAgICAgICAgICA8cHJlPntKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2UsIHN0YWNrIH0sIG51bGwsIDIpfTwvcHJlPlxuICAgICAgICA8L0Vycm9yQm94PlxuICAgICAgKTtcbiAgICB9XG4gIH07XG59XG4iXX0=