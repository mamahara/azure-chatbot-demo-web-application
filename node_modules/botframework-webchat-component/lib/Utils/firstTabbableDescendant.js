"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = firstTabbableDescendant;
exports.orSelf = orSelf;

var _getTabIndex = _interopRequireDefault(require("./TypeFocusSink/getTabIndex"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SELECTOR = 'a[href], audio, button, details, details summary, embed, iframe, input, object, rect, select, svg[focusable], textarea, video, [tabindex]';

function firstTabbableDescendant(element) {
  if (!element) {
    return;
  } // This is best-effort for finding a tabbable element.
  // For a comprehensive list, please refer to https://allyjs.io/data-tables/focusable.html and update this list accordingly.


  var focusables = element.querySelectorAll(SELECTOR);
  return [].find.call(focusables, function (focusable) {
    var tabIndex = (0, _getTabIndex.default)(focusable);
    return typeof tabIndex === 'number' && tabIndex >= 0;
  });
}

function orSelf(element) {
  if (!element) {
    return;
  }

  if (element.matches(SELECTOR)) {
    return element;
  }

  return firstTabbableDescendant(element);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9VdGlscy9maXJzdFRhYmJhYmxlRGVzY2VuZGFudC5qcyJdLCJuYW1lcyI6WyJTRUxFQ1RPUiIsImZpcnN0VGFiYmFibGVEZXNjZW5kYW50IiwiZWxlbWVudCIsImZvY3VzYWJsZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZmluZCIsImNhbGwiLCJmb2N1c2FibGUiLCJ0YWJJbmRleCIsIm9yU2VsZiIsIm1hdGNoZXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7Ozs7QUFFQSxJQUFNQSxRQUFRLEdBQ1osMklBREY7O0FBR2UsU0FBU0MsdUJBQVQsQ0FBaUNDLE9BQWpDLEVBQTBDO0FBQ3ZELE1BQUksQ0FBQ0EsT0FBTCxFQUFjO0FBQ1o7QUFDRCxHQUhzRCxDQUt2RDtBQUNBOzs7QUFDQSxNQUFNQyxVQUFVLEdBQUdELE9BQU8sQ0FBQ0UsZ0JBQVIsQ0FBeUJKLFFBQXpCLENBQW5CO0FBRUEsU0FBTyxHQUFHSyxJQUFILENBQVFDLElBQVIsQ0FBYUgsVUFBYixFQUF5QixVQUFBSSxTQUFTLEVBQUk7QUFDM0MsUUFBTUMsUUFBUSxHQUFHLDBCQUFZRCxTQUFaLENBQWpCO0FBRUEsV0FBTyxPQUFPQyxRQUFQLEtBQW9CLFFBQXBCLElBQWdDQSxRQUFRLElBQUksQ0FBbkQ7QUFDRCxHQUpNLENBQVA7QUFLRDs7QUFFRCxTQUFTQyxNQUFULENBQWdCUCxPQUFoQixFQUF5QjtBQUN2QixNQUFJLENBQUNBLE9BQUwsRUFBYztBQUNaO0FBQ0Q7O0FBRUQsTUFBSUEsT0FBTyxDQUFDUSxPQUFSLENBQWdCVixRQUFoQixDQUFKLEVBQStCO0FBQzdCLFdBQU9FLE9BQVA7QUFDRDs7QUFFRCxTQUFPRCx1QkFBdUIsQ0FBQ0MsT0FBRCxDQUE5QjtBQUNEIiwic291cmNlUm9vdCI6ImNvbXBvbmVudDovLy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ2V0VGFiSW5kZXggZnJvbSAnLi9UeXBlRm9jdXNTaW5rL2dldFRhYkluZGV4JztcblxuY29uc3QgU0VMRUNUT1IgPVxuICAnYVtocmVmXSwgYXVkaW8sIGJ1dHRvbiwgZGV0YWlscywgZGV0YWlscyBzdW1tYXJ5LCBlbWJlZCwgaWZyYW1lLCBpbnB1dCwgb2JqZWN0LCByZWN0LCBzZWxlY3QsIHN2Z1tmb2N1c2FibGVdLCB0ZXh0YXJlYSwgdmlkZW8sIFt0YWJpbmRleF0nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmaXJzdFRhYmJhYmxlRGVzY2VuZGFudChlbGVtZW50KSB7XG4gIGlmICghZWxlbWVudCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFRoaXMgaXMgYmVzdC1lZmZvcnQgZm9yIGZpbmRpbmcgYSB0YWJiYWJsZSBlbGVtZW50LlxuICAvLyBGb3IgYSBjb21wcmVoZW5zaXZlIGxpc3QsIHBsZWFzZSByZWZlciB0byBodHRwczovL2FsbHlqcy5pby9kYXRhLXRhYmxlcy9mb2N1c2FibGUuaHRtbCBhbmQgdXBkYXRlIHRoaXMgbGlzdCBhY2NvcmRpbmdseS5cbiAgY29uc3QgZm9jdXNhYmxlcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUik7XG5cbiAgcmV0dXJuIFtdLmZpbmQuY2FsbChmb2N1c2FibGVzLCBmb2N1c2FibGUgPT4ge1xuICAgIGNvbnN0IHRhYkluZGV4ID0gZ2V0VGFiSW5kZXgoZm9jdXNhYmxlKTtcblxuICAgIHJldHVybiB0eXBlb2YgdGFiSW5kZXggPT09ICdudW1iZXInICYmIHRhYkluZGV4ID49IDA7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBvclNlbGYoZWxlbWVudCkge1xuICBpZiAoIWVsZW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZWxlbWVudC5tYXRjaGVzKFNFTEVDVE9SKSkge1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcmV0dXJuIGZpcnN0VGFiYmFibGVEZXNjZW5kYW50KGVsZW1lbnQpO1xufVxuXG5leHBvcnQgeyBvclNlbGYgfTtcbiJdfQ==