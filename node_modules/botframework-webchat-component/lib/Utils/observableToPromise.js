"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = observableToPromise;

function observableToPromise(observable) {
  return new Promise(function (resolve, reject) {
    var subscription = observable.subscribe(function (sessionId) {
      resolve(sessionId); // HACK: Sometimes, the call complete asynchronously and we cannot unsubscribe
      //       Need to wait some short time here to make sure the subscription variable has setup

      setTimeout(function () {
        return subscription.unsubscribe();
      }, 0);
    }, function (error) {
      reject(error);
      setTimeout(function () {
        return subscription.unsubscribe();
      }, 0);
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9VdGlscy9vYnNlcnZhYmxlVG9Qcm9taXNlLmpzIl0sIm5hbWVzIjpbIm9ic2VydmFibGVUb1Byb21pc2UiLCJvYnNlcnZhYmxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzdWJzY3JpcHRpb24iLCJzdWJzY3JpYmUiLCJzZXNzaW9uSWQiLCJzZXRUaW1lb3V0IiwidW5zdWJzY3JpYmUiLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFlLFNBQVNBLG1CQUFULENBQTZCQyxVQUE3QixFQUF5QztBQUN0RCxTQUFPLElBQUlDLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDdEMsUUFBTUMsWUFBWSxHQUFHSixVQUFVLENBQUNLLFNBQVgsQ0FDbkIsVUFBQUMsU0FBUyxFQUFJO0FBQ1hKLE1BQUFBLE9BQU8sQ0FBQ0ksU0FBRCxDQUFQLENBRFcsQ0FHWDtBQUNBOztBQUNBQyxNQUFBQSxVQUFVLENBQUM7QUFBQSxlQUFNSCxZQUFZLENBQUNJLFdBQWIsRUFBTjtBQUFBLE9BQUQsRUFBbUMsQ0FBbkMsQ0FBVjtBQUNELEtBUGtCLEVBUW5CLFVBQUFDLEtBQUssRUFBSTtBQUNQTixNQUFBQSxNQUFNLENBQUNNLEtBQUQsQ0FBTjtBQUNBRixNQUFBQSxVQUFVLENBQUM7QUFBQSxlQUFNSCxZQUFZLENBQUNJLFdBQWIsRUFBTjtBQUFBLE9BQUQsRUFBbUMsQ0FBbkMsQ0FBVjtBQUNELEtBWGtCLENBQXJCO0FBYUQsR0FkTSxDQUFQO0FBZUQiLCJzb3VyY2VSb290IjoiY29tcG9uZW50Oi8vLyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9ic2VydmFibGVUb1Byb21pc2Uob2JzZXJ2YWJsZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IG9ic2VydmFibGUuc3Vic2NyaWJlKFxuICAgICAgc2Vzc2lvbklkID0+IHtcbiAgICAgICAgcmVzb2x2ZShzZXNzaW9uSWQpO1xuXG4gICAgICAgIC8vIEhBQ0s6IFNvbWV0aW1lcywgdGhlIGNhbGwgY29tcGxldGUgYXN5bmNocm9ub3VzbHkgYW5kIHdlIGNhbm5vdCB1bnN1YnNjcmliZVxuICAgICAgICAvLyAgICAgICBOZWVkIHRvIHdhaXQgc29tZSBzaG9ydCB0aW1lIGhlcmUgdG8gbWFrZSBzdXJlIHRoZSBzdWJzY3JpcHRpb24gdmFyaWFibGUgaGFzIHNldHVwXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCksIDApO1xuICAgICAgfSxcbiAgICAgIGVycm9yID0+IHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKSwgMCk7XG4gICAgICB9XG4gICAgKTtcbiAgfSk7XG59XG4iXX0=