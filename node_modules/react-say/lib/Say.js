"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _readOnlyError2 = _interopRequireDefault(require("@babel/runtime/helpers/readOnlyError"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireWildcard(require("react"));

var _Composer = _interopRequireDefault(require("./Composer"));

var _Context = _interopRequireDefault(require("./Context"));

var _createNativeUtterance = _interopRequireDefault(require("./createNativeUtterance"));

var _migrateDeprecatedProps = _interopRequireDefault(require("./migrateDeprecatedProps"));

var _SayUtterance = _interopRequireDefault(require("./SayUtterance"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var Say = function Say(props) {
  var _migrateDeprecatedPro = (0, _migrateDeprecatedProps["default"])(props, Say),
      lang = _migrateDeprecatedPro.lang,
      onBoundary = _migrateDeprecatedPro.onBoundary,
      onEnd = _migrateDeprecatedPro.onEnd,
      onError = _migrateDeprecatedPro.onError,
      onStart = _migrateDeprecatedPro.onStart,
      pitch = _migrateDeprecatedPro.pitch,
      rate = _migrateDeprecatedPro.rate,
      speak = _migrateDeprecatedPro.speak,
      text = _migrateDeprecatedPro.text,
      voice = _migrateDeprecatedPro.voice,
      volume = _migrateDeprecatedPro.volume;

  var _useContext = (0, _react.useContext)(_Context["default"]),
      ponyfill = _useContext.ponyfill;

  if (speak && !text) {
    console.warn('react-say: "speak" prop is being deprecated and renamed to "text".');
    text = ((0, _readOnlyError2["default"])("text"), speak);
  }

  var utterance = (0, _react.useMemo)(function () {
    return (0, _createNativeUtterance["default"])(ponyfill, {
      lang: lang,
      onBoundary: onBoundary,
      pitch: pitch,
      rate: rate,
      text: text,
      voice: voice,
      volume: volume
    });
  }, [lang, onBoundary, pitch, ponyfill, rate, text, voice, volume]);
  return _react["default"].createElement(_SayUtterance["default"], {
    onEnd: onEnd,
    onError: onError,
    onStart: onStart,
    ponyfill: ponyfill,
    utterance: utterance
  });
};

Say.defaultProps = {
  children: undefined,
  lang: undefined,
  onBoundary: undefined,
  onEnd: undefined,
  onError: undefined,
  onStart: undefined,
  pitch: undefined,
  rate: undefined,
  speak: undefined,
  voice: undefined,
  volume: undefined
};
Say.propTypes = {
  children: _propTypes["default"].any,
  lang: _propTypes["default"].string,
  onBoundary: _propTypes["default"].func,
  onEnd: _propTypes["default"].func,
  onError: _propTypes["default"].func,
  onStart: _propTypes["default"].func,
  pitch: _propTypes["default"].number,
  rate: _propTypes["default"].number,
  speak: _propTypes["default"].string,
  text: _propTypes["default"].string.isRequired,
  voice: _propTypes["default"].oneOfType([_propTypes["default"].any, _propTypes["default"].func]),
  volume: _propTypes["default"].number
};

var SayWithContext = function SayWithContext(_ref) {
  var ponyfill = _ref.ponyfill,
      props = (0, _objectWithoutProperties2["default"])(_ref, ["ponyfill"]);
  return _react["default"].createElement(_Composer["default"], {
    ponyfill: ponyfill
  }, _react["default"].createElement(Say, props));
};

SayWithContext.defaultProps = _objectSpread({}, _SayUtterance["default"].defaultProps, {
  ponyfill: undefined
});
SayWithContext.propTypes = _objectSpread({}, _SayUtterance["default"].propTypes, {
  ponyfill: _propTypes["default"].shape({
    speechSynthesis: _propTypes["default"].any.isRequired,
    SpeechSynthesisUtterance: _propTypes["default"].any.isRequired
  })
});
var _default = SayWithContext;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9TYXkuanMiXSwibmFtZXMiOlsiU2F5IiwicHJvcHMiLCJsYW5nIiwib25Cb3VuZGFyeSIsIm9uRW5kIiwib25FcnJvciIsIm9uU3RhcnQiLCJwaXRjaCIsInJhdGUiLCJzcGVhayIsInRleHQiLCJ2b2ljZSIsInZvbHVtZSIsIkNvbnRleHQiLCJwb255ZmlsbCIsImNvbnNvbGUiLCJ3YXJuIiwidXR0ZXJhbmNlIiwiZGVmYXVsdFByb3BzIiwiY2hpbGRyZW4iLCJ1bmRlZmluZWQiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJhbnkiLCJzdHJpbmciLCJmdW5jIiwibnVtYmVyIiwiaXNSZXF1aXJlZCIsIm9uZU9mVHlwZSIsIlNheVdpdGhDb250ZXh0IiwiU2F5VXR0ZXJhbmNlIiwic2hhcGUiLCJzcGVlY2hTeW50aGVzaXMiLCJTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQUVBLElBQU1BLEdBQUcsR0FBRyxTQUFOQSxHQUFNLENBQUFDLEtBQUssRUFBSTtBQUFBLDhCQWFmLHdDQUF1QkEsS0FBdkIsRUFBOEJELEdBQTlCLENBYmU7QUFBQSxNQUVqQkUsSUFGaUIseUJBRWpCQSxJQUZpQjtBQUFBLE1BR2pCQyxVQUhpQix5QkFHakJBLFVBSGlCO0FBQUEsTUFJakJDLEtBSmlCLHlCQUlqQkEsS0FKaUI7QUFBQSxNQUtqQkMsT0FMaUIseUJBS2pCQSxPQUxpQjtBQUFBLE1BTWpCQyxPQU5pQix5QkFNakJBLE9BTmlCO0FBQUEsTUFPakJDLEtBUGlCLHlCQU9qQkEsS0FQaUI7QUFBQSxNQVFqQkMsSUFSaUIseUJBUWpCQSxJQVJpQjtBQUFBLE1BU2pCQyxLQVRpQix5QkFTakJBLEtBVGlCO0FBQUEsTUFVakJDLElBVmlCLHlCQVVqQkEsSUFWaUI7QUFBQSxNQVdqQkMsS0FYaUIseUJBV2pCQSxLQVhpQjtB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RCxFQUFTYixLQUFULENBREYsQ0FEcUI7QUFBQSxDQUF2Qjs7QUFNQTRCLGNBQWMsQ0FBQ1gsWUFBZixxQkFDS1kseUJBQWFaLFlBRGxCO0FBRUVKLEVBQUFBLFFBQVEsRUFBRU07QUFGWjtBQUtBUyxjQUFjLENBQUNSLFNBQWYscUJBQ0tTLHlCQUFhVCxTQURsQjtBQUVFUCxFQUFBQSxRQUFRLEVBQUVRLHNCQUFVUyxLQUFWLENBQWdCO0FBQ3hCQyxJQUFBQSxlQUFlLEVBQUVWLHNCQUFVQyxHQUFWLENBQWNJLFVBRFA7QUFFeEJNLElBQUFBLHdCQUF3QixFQUFFWCxzQkFBVUMsR0FBVixDQUFjSTtBQUZoQixHQUFoQjtBQUZaO2VBUWVFLGMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNvbnRleHQsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCBDb21wb3NlciBmcm9tICcuL0NvbXBvc2VyJztcbmltcG9ydCBDb250ZXh0IGZyb20gJy4vQ29udGV4dCc7XG5pbXBvcnQgY3JlYXRlTmF0aXZlVXR0ZXJhbmNlIGZyb20gJy4vY3JlYXRlTmF0aXZlVXR0ZXJhbmNlJztcbmltcG9ydCBtaWdyYXRlRGVwcmVjYXRlZFByb3BzIGZyb20gJy4vbWlncmF0ZURlcHJlY2F0ZWRQcm9wcyc7XG5pbXBvcnQgU2F5VXR0ZXJhbmNlIGZyb20gJy4vU2F5VXR0ZXJhbmNlJztcblxuY29uc3QgU2F5ID0gcHJvcHMgPT4ge1xuICBjb25zdCB7XG4gICAgbGFuZyxcbiAgICBvbkJvdW5kYXJ5LFxuICAgIG9uRW5kLFxuICAgIG9uRXJyb3IsXG4gICAgb25TdGFydCxcbiAgICBwaXRjaCxcbiAgICByYXRlLFxuICAgIHNwZWFrLFxuICAgIHRleHQsXG4gICAgdm9pY2UsXG4gICAgdm9sdW1lXG4gIH0gPSBtaWdyYXRlRGVwcmVjYXRlZFByb3BzKHByb3BzLCBTYXkpO1xuXG4gIGNvbnN0IHsgcG9ueWZpbGwgfSA9IHVzZUNvbnRleHQoQ29udGV4dCk7XG5cbiAgaWYgKHNwZWFrICYmICF0ZXh0KSB7XG4gICAgY29uc29sZS53YXJuKCdyZWFjdC1zYXk6IFwic3BlYWtcIiBwcm9wIGlzIGJlaW5nIGRlcHJlY2F0ZWQgYW5kIHJlbmFtZWQgdG8gXCJ0ZXh0XCIuJyk7XG4gICAgdGV4dCA9IHNwZWFrO1xuICB9XG5cbiAgY29uc3QgdXR0ZXJhbmNlID0gdXNlTWVtbygoKSA9PlxuICAgIGNyZWF0ZU5hdGl2ZVV0dGVyYW5jZShcbiAgICAgIHBvbnlmaWxsLFxuICAgICAge1xuICAgICAgICBsYW5nLFxuICAgICAgICBvbkJvdW5kYXJ5LFxuICAgICAgICBwaXRjaCxcbiAgICAgICAgcmF0ZSxcbiAgICAgICAgdGV4dCxcbiAgICAgICAgdm9pY2UsXG4gICAgICAgIHZvbHVtZVxuICAgICAgfVxuICAgICksXG4gICAgW1xuICAgICAgbGFuZyxcbiAgICAgIG9uQm91bmRhcnksXG4gICAgICBwaXRjaCxcbiAgICAgIHBvbnlmaWxsLFxuICAgICAgcmF0ZSxcbiAgICAgIHRleHQsXG4gICAgICB2b2ljZSxcbiAgICAgIHZvbHVtZVxuICAgIF1cbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxTYXlVdHRlcmFuY2VcbiAgICAgIG9uRW5kPXsgb25FbmQgfVxuICAgICAgb25FcnJvcj17IG9uRXJyb3IgfVxuICAgICAgb25TdGFydD17IG9uU3RhcnQgfVxuICAgICAgcG9ueWZpbGw9eyBwb255ZmlsbCB9XG4gICAgICB1dHRlcmFuY2U9eyB1dHRlcmFuY2UgfVxuICAgIC8+XG4gICk7XG59XG5cblNheS5kZWZhdWx0UHJvcHMgPSB7XG4gIGNoaWxkcmVuOiB1bmRlZmluZWQsXG4gIGxhbmc6IHVuZGVmaW5lZCxcbiAgb25Cb3VuZGFyeTogdW5kZWZpbmVkLFxuICBvbkVuZDogdW5kZWZpbmVkLFxuICBvbkVycm9yOiB1bmRlZmluZWQsXG4gIG9uU3RhcnQ6IHVuZGVmaW5lZCxcbiAgcGl0Y2g6IHVuZGVmaW5lZCxcbiAgcmF0ZTogdW5kZWZpbmVkLFxuICBzcGVhazogdW5kZWZpbmVkLFxuICB2b2ljZTogdW5kZWZpbmVkLFxuICB2b2x1bWU6IHVuZGVmaW5lZFxufTtcblxuU2F5LnByb3BUeXBlcyA9IHtcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5hbnksXG4gIGxhbmc6IFByb3BUeXBlcy5zdHJpbmcsXG4gIG9uQm91bmRhcnk6IFByb3BUeXBlcy5mdW5jLFxuICBvbkVuZDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uRXJyb3I6IFByb3BUeXBlcy5mdW5jLFxuICBvblN0YXJ0OiBQcm9wVHlwZXMuZnVuYyxcbiAgcGl0Y2g6IFByb3BUeXBlcy5udW1iZXIsXG4gIHJhdGU6IFByb3BUeXBlcy5udW1iZXIsXG4gIHNwZWFrOiBQcm9wVHlwZXMuc3RyaW5nLFxuICB0ZXh0OiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIHZvaWNlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYW55LCBQcm9wVHlwZXMuZnVuY10pLFxuICB2b2x1bWU6IFByb3BUeXBlcy5udW1iZXJcbn07XG5cbmNvbnN0IFNheVdpdGhDb250ZXh0ID0gKHsgcG9ueWZpbGwsIC4uLnByb3BzIH0pID0+IChcbiAgPENvbXBvc2VyIHBvbnlmaWxsPXsgcG9ueWZpbGwgfT5cbiAgICA8U2F5IHsuLi5wcm9wc30gLz5cbiAgPC9Db21wb3Nlcj5cbik7XG5cblNheVdpdGhDb250ZXh0LmRlZmF1bHRQcm9wcyA9IHtcbiAgLi4uU2F5VXR0ZXJhbmNlLmRlZmF1bHRQcm9wcyxcbiAgcG9ueWZpbGw6IHVuZGVmaW5lZFxufTtcblxuU2F5V2l0aENvbnRleHQucHJvcFR5cGVzID0ge1xuICAuLi5TYXlVdHRlcmFuY2UucHJvcFR5cGVzLFxuICBwb255ZmlsbDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICBzcGVlY2hTeW50aGVzaXM6IFByb3BUeXBlcy5hbnkuaXNSZXF1aXJlZCxcbiAgICBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2U6IFByb3BUeXBlcy5hbnkuaXNSZXF1aXJlZFxuICB9KVxufTtcblxuZXhwb3J0IGRlZmF1bHQgU2F5V2l0aENvbnRleHRcbiJdfQ==