"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _botframeworkWebchatComponent = require("botframework-webchat-component");

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireWildcard(require("react"));

var _AdaptiveCardBuilder = _interopRequireDefault(require("./AdaptiveCardBuilder"));

var _AdaptiveCardRenderer = _interopRequireDefault(require("./AdaptiveCardRenderer"));

var _useAdaptiveCardsPackage = _interopRequireDefault(require("../hooks/useAdaptiveCardsPackage"));

var useDirection = _botframeworkWebchatComponent.hooks.useDirection,
    useStyleOptions = _botframeworkWebchatComponent.hooks.useStyleOptions;

var OAuthCardContent = function OAuthCardContent(_ref) {
  var actionPerformedClassName = _ref.actionPerformedClassName,
      content = _ref.content,
      disabled = _ref.disabled;

  var _useAdaptiveCardsPack = (0, _useAdaptiveCardsPackage.default)(),
      _useAdaptiveCardsPack2 = (0, _slicedToArray2.default)(_useAdaptiveCardsPack, 1),
      adaptiveCardsPackage = _useAdaptiveCardsPack2[0];

  var _useDirection = useDirection(),
      _useDirection2 = (0, _slicedToArray2.default)(_useDirection, 1),
      direction = _useDirection2[0];

  var _useStyleOptions = useStyleOptions(),
      _useStyleOptions2 = (0, _slicedToArray2.default)(_useStyleOptions, 1),
      styleOptions = _useStyleOptions2[0];

  var builtCard = (0, _react.useMemo)(function () {
    if (content) {
      var builder = new _AdaptiveCardBuilder.default(adaptiveCardsPackage, styleOptions, direction);
      builder.addCommonHeaders(content);
      builder.addButtons(content.buttons, true);
      return builder.card;
    }
  }, [adaptiveCardsPackage, content, direction, styleOptions]);
  return /*#__PURE__*/_react.default.createElement(_AdaptiveCardRenderer.default, {
    actionPerformedClassName: actionPerformedClassName,
    adaptiveCard: builtCard,
    disabled: disabled
  });
};

OAuthCardContent.defaultProps = {
  actionPerformedClassName: '',
  disabled: undefined
};
OAuthCardContent.propTypes = {
  actionPerformedClassName: _propTypes.default.string,
  content: _propTypes.default.shape({
    buttons: _propTypes.default.array
  }).isRequired,
  disabled: _propTypes.default.bool
};
var _default = OAuthCardContent;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hZGFwdGl2ZUNhcmRzL0F0dGFjaG1lbnQvT0F1dGhDYXJkQ29udGVudC5qcyJdLCJuYW1lcyI6WyJ1c2VEaXJlY3Rpb24iLCJob29rcyIsInVzZVN0eWxlT3B0aW9ucyIsIk9BdXRoQ2FyZENvbnRlbnQiLCJhY3Rpb25QZXJmb3JtZWRDbGFzc05hbWUiLCJjb250ZW50IiwiZGlzYWJsZWQiLCJhZGFwdGl2ZUNhcmRzUGFja2FnZSIsImRpcmVjdGlvbiIsInN0eWxlT3B0aW9ucyIsImJ1aWx0Q2FyZCIsImJ1aWxkZXIiLCJBZGFwdGl2ZUNhcmRCdWlsZGVyIiwiYWRkQ29tbW9uSGVhZGVycyIsImFkZEJ1dHRvbnMiLCJidXR0b25zIiwiY2FyZCIsImRlZmF1bHRQcm9wcyIsInVuZGVmaW5lZCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsInN0cmluZyIsInNoYXBlIiwiYXJyYXkiLCJpc1JlcXVpcmVkIiwiYm9vbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztJQUVRQSxZLEdBQWtDQyxtQyxDQUFsQ0QsWTtJQUFjRSxlLEdBQW9CRCxtQyxDQUFwQkMsZTs7QUFFdEIsSUFBTUMsZ0JBQWdCLEdBQUcsU0FBbkJBLGdCQUFtQixPQUFxRDtBQUFBLE1BQWxEQyx3QkFBa0QsUUFBbERBLHdCQUFrRDtBQUFBLE1BQXhCQyxPQUF3QixRQUF4QkEsT0FBd0I7QUFBQSxNQUFmQyxRQUFlLFFBQWZBLFFBQWU7O0FBQUEsOEJBQzdDLHVDQUQ2QztBQUFBO0FBQUEsTUFDckVDLG9CQURxRTs7QUFBQSxzQkFFeERQLFlBQVksRUFGNEM7QUFBQTtBQUFBLE1BRXJFUSxTQUZxRTs7QUFBQSx5QkFHckROLGVBQWUsRUFIc0M7QUFBQTtBQUFBLE1BR3JFTyxZQUhxRTs7QUFLNUUsTUFBTUMsU0FBUyxHQUFHLG9CQUFRLFlBQU07QUFDOUIsUUFBSUwsT0FBSixFQUFhO0FBQ1gsVUFBTU0sT0FBTyxHQUFHLElBQUlDLDRCQUFKLENBQXdCTCxvQkFBeEIsRUFBOENFLFlBQTlDLEVBQTRERCxTQUE1RCxDQUFoQjtBQUVBRyxNQUFBQSxPQUFPLENBQUNFLGdCQUFSLENBQXlCUixPQUF6QjtBQUNBTSxNQUFBQSxPQUFPLENBQUNHLFVBQVIsQ0FBbUJULE9BQU8sQ0FBQ1UsT0FBM0IsRUFBb0MsSUFBcEM7QUFFQSxhQUFPSixPQUFPLENBQUNLLElBQWY7QUFDRDtBQUNGLEdBVGlCLEVBU2YsQ0FBQ1Qsb0JBQUQsRUFBdUJGLE9BQXZCLEVBQWdDRyxTQUFoQyxFQUEyQ0MsWUFBM0MsQ0FUZSxDQUFsQjtBQVdBLHNCQUNFLDZCQUFDLDZCQUFEO0FBQ0UsSUFBQSx3QkFBd0IsRUFBRUwsd0JBRDVCO0FBRUUsSUFBQSxZQUFZLEVBQUVNLFNBRmhCO0FBR0UsSUFBQSxRQUFRLEVBQUVKO0FBSFosSUFERjtBQU9ELENBdkJEOztBQXlCQUgsZ0JBQWdCLENBQUNjLFlBQWpCLEdBQWdDO0FBQzlCYixFQUFBQSx3QkFBd0IsRUFBRSxFQURJO0FBRTlCRSxFQUFBQSxRQUFRLEVBQUVZO0FBRm9CLENBQWhDO0FBS0FmLGdCQUFnQixDQUFDZ0IsU0FBakIsR0FBNkI7QUFDM0JmLEVBQUFBLHdCQUF3QixFQUFFZ0IsbUJBQVVDLE1BRFQ7QUFFM0JoQixFQUFBQSxPQUFPLEVBQUVlLG1CQUFVRSxLQUFWLENBQWdCO0FBQ3ZCUCxJQUFBQSxPQUFPLEVBQUVLLG1CQUFVRztBQURJLEdBQWhCLEVBRU5DLFVBSndCO0FBSzNCbEIsRUFBQUEsUUFBUSxFQUFFYyxtQkFBVUs7QUFMTyxDQUE3QjtlQVFldEIsZ0IiLCJzb3VyY2VSb290IjoiYnVuZGxlOi8vLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGhvb2tzIH0gZnJvbSAnYm90ZnJhbWV3b3JrLXdlYmNoYXQtY29tcG9uZW50JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IEFkYXB0aXZlQ2FyZEJ1aWxkZXIgZnJvbSAnLi9BZGFwdGl2ZUNhcmRCdWlsZGVyJztcbmltcG9ydCBBZGFwdGl2ZUNhcmRSZW5kZXJlciBmcm9tICcuL0FkYXB0aXZlQ2FyZFJlbmRlcmVyJztcbmltcG9ydCB1c2VBZGFwdGl2ZUNhcmRzUGFja2FnZSBmcm9tICcuLi9ob29rcy91c2VBZGFwdGl2ZUNhcmRzUGFja2FnZSc7XG5cbmNvbnN0IHsgdXNlRGlyZWN0aW9uLCB1c2VTdHlsZU9wdGlvbnMgfSA9IGhvb2tzO1xuXG5jb25zdCBPQXV0aENhcmRDb250ZW50ID0gKHsgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lLCBjb250ZW50LCBkaXNhYmxlZCB9KSA9PiB7XG4gIGNvbnN0IFthZGFwdGl2ZUNhcmRzUGFja2FnZV0gPSB1c2VBZGFwdGl2ZUNhcmRzUGFja2FnZSgpO1xuICBjb25zdCBbZGlyZWN0aW9uXSA9IHVzZURpcmVjdGlvbigpO1xuICBjb25zdCBbc3R5bGVPcHRpb25zXSA9IHVzZVN0eWxlT3B0aW9ucygpO1xuXG4gIGNvbnN0IGJ1aWx0Q2FyZCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBjb25zdCBidWlsZGVyID0gbmV3IEFkYXB0aXZlQ2FyZEJ1aWxkZXIoYWRhcHRpdmVDYXJkc1BhY2thZ2UsIHN0eWxlT3B0aW9ucywgZGlyZWN0aW9uKTtcblxuICAgICAgYnVpbGRlci5hZGRDb21tb25IZWFkZXJzKGNvbnRlbnQpO1xuICAgICAgYnVpbGRlci5hZGRCdXR0b25zKGNvbnRlbnQuYnV0dG9ucywgdHJ1ZSk7XG5cbiAgICAgIHJldHVybiBidWlsZGVyLmNhcmQ7XG4gICAgfVxuICB9LCBbYWRhcHRpdmVDYXJkc1BhY2thZ2UsIGNvbnRlbnQsIGRpcmVjdGlvbiwgc3R5bGVPcHRpb25zXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8QWRhcHRpdmVDYXJkUmVuZGVyZXJcbiAgICAgIGFjdGlvblBlcmZvcm1lZENsYXNzTmFtZT17YWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lfVxuICAgICAgYWRhcHRpdmVDYXJkPXtidWlsdENhcmR9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgLz5cbiAgKTtcbn07XG5cbk9BdXRoQ2FyZENvbnRlbnQuZGVmYXVsdFByb3BzID0ge1xuICBhY3Rpb25QZXJmb3JtZWRDbGFzc05hbWU6ICcnLFxuICBkaXNhYmxlZDogdW5kZWZpbmVkXG59O1xuXG5PQXV0aENhcmRDb250ZW50LnByb3BUeXBlcyA9IHtcbiAgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjb250ZW50OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGJ1dHRvbnM6IFByb3BUeXBlcy5hcnJheVxuICB9KS5pc1JlcXVpcmVkLFxuICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2xcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE9BdXRoQ2FyZENvbnRlbnQ7XG4iXX0=