"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _botframeworkWebchatComponent = require("botframework-webchat-component");

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireWildcard(require("react"));

var _AdaptiveCardBuilder = _interopRequireDefault(require("./AdaptiveCardBuilder"));

var _AdaptiveCardRenderer = _interopRequireDefault(require("./AdaptiveCardRenderer"));

var _useAdaptiveCardsPackage = _interopRequireDefault(require("../hooks/useAdaptiveCardsPackage"));

var useDirection = _botframeworkWebchatComponent.hooks.useDirection,
    useStyleOptions = _botframeworkWebchatComponent.hooks.useStyleOptions;

var HeroCardContent = function HeroCardContent(_ref) {
  var actionPerformedClassName = _ref.actionPerformedClassName,
      content = _ref.content,
      disabled = _ref.disabled;

  var _useAdaptiveCardsPack = (0, _useAdaptiveCardsPackage.default)(),
      _useAdaptiveCardsPack2 = (0, _slicedToArray2.default)(_useAdaptiveCardsPack, 1),
      adaptiveCardsPackage = _useAdaptiveCardsPack2[0];

  var _useStyleOptions = useStyleOptions(),
      _useStyleOptions2 = (0, _slicedToArray2.default)(_useStyleOptions, 1),
      styleOptions = _useStyleOptions2[0];

  var _useDirection = useDirection(),
      _useDirection2 = (0, _slicedToArray2.default)(_useDirection, 1),
      direction = _useDirection2[0];

  var builtCard = (0, _react.useMemo)(function () {
    var builder = new _AdaptiveCardBuilder.default(adaptiveCardsPackage, styleOptions, direction);

    if (content) {
      (content.images || []).forEach(function (image) {
        return builder.addImage(image.url, null, image.tap);
      });
      builder.addCommon(content);
      return builder.card;
    }
  }, [adaptiveCardsPackage, content, direction, styleOptions]);
  return /*#__PURE__*/_react.default.createElement(_AdaptiveCardRenderer.default, {
    actionPerformedClassName: actionPerformedClassName,
    adaptiveCard: builtCard,
    disabled: disabled,
    tapAction: content && content.tap
  });
};

HeroCardContent.defaultProps = {
  actionPerformedClassName: '',
  disabled: undefined
};
HeroCardContent.propTypes = {
  actionPerformedClassName: _propTypes.default.string,
  content: _propTypes.default.shape({
    images: _propTypes.default.arrayOf(_propTypes.default.shape({
      tap: _propTypes.default.any,
      url: _propTypes.default.string
    })),
    tap: _propTypes.default.any
  }).isRequired,
  disabled: _propTypes.default.bool
};
var _default = HeroCardContent;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hZGFwdGl2ZUNhcmRzL0F0dGFjaG1lbnQvSGVyb0NhcmRDb250ZW50LmpzIl0sIm5hbWVzIjpbInVzZURpcmVjdGlvbiIsImhvb2tzIiwidXNlU3R5bGVPcHRpb25zIiwiSGVyb0NhcmRDb250ZW50IiwiYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lIiwiY29udGVudCIsImRpc2FibGVkIiwiYWRhcHRpdmVDYXJkc1BhY2thZ2UiLCJzdHlsZU9wdGlvbnMiLCJkaXJlY3Rpb24iLCJidWlsdENhcmQiLCJidWlsZGVyIiwiQWRhcHRpdmVDYXJkQnVpbGRlciIsImltYWdlcyIsImZvckVhY2giLCJpbWFnZSIsImFkZEltYWdlIiwidXJsIiwidGFwIiwiYWRkQ29tbW9uIiwiY2FyZCIsImRlZmF1bHRQcm9wcyIsInVuZGVmaW5lZCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsInN0cmluZyIsInNoYXBlIiwiYXJyYXlPZiIsImFueSIsImlzUmVxdWlyZWQiLCJib29sIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0lBRVFBLFksR0FBa0NDLG1DLENBQWxDRCxZO0lBQWNFLGUsR0FBb0JELG1DLENBQXBCQyxlOztBQUV0QixJQUFNQyxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLE9BQXFEO0FBQUEsTUFBbERDLHdCQUFrRCxRQUFsREEsd0JBQWtEO0FBQUEsTUFBeEJDLE9BQXdCLFFBQXhCQSxPQUF3QjtBQUFBLE1BQWZDLFFBQWUsUUFBZkEsUUFBZTs7QUFBQSw4QkFDNUMsdUNBRDRDO0FBQUE7QUFBQSxNQUNwRUMsb0JBRG9FOztBQUFBLHlCQUVwREwsZUFBZSxFQUZxQztBQUFBO0FBQUEsTUFFcEVNLFlBRm9FOztBQUFBLHNCQUd2RFIsWUFBWSxFQUgyQztBQUFBO0FBQUEsTUFHcEVTLFNBSG9FOztBQUkzRSxNQUFNQyxTQUFTLEdBQUcsb0JBQVEsWUFBTTtBQUM5QixRQUFNQyxPQUFPLEdBQUcsSUFBSUMsNEJBQUosQ0FBd0JMLG9CQUF4QixFQUE4Q0MsWUFBOUMsRUFBNERDLFNBQTVELENBQWhCOztBQUVBLFFBQUlKLE9BQUosRUFBYTtBQUNYLE9BQUNBLE9BQU8sQ0FBQ1EsTUFBUixJQUFrQixFQUFuQixFQUF1QkMsT0FBdkIsQ0FBK0IsVUFBQUMsS0FBSztBQUFBLGVBQUlKLE9BQU8sQ0FBQ0ssUUFBUixDQUFpQkQsS0FBSyxDQUFDRSxHQUF2QixFQUE0QixJQUE1QixFQUFrQ0YsS0FBSyxDQUFDRyxHQUF4QyxDQUFKO0FBQUEsT0FBcEM7QUFFQVAsTUFBQUEsT0FBTyxDQUFDUSxTQUFSLENBQWtCZCxPQUFsQjtBQUVBLGFBQU9NLE9BQU8sQ0FBQ1MsSUFBZjtBQUNEO0FBQ0YsR0FWaUIsRUFVZixDQUFDYixvQkFBRCxFQUF1QkYsT0FBdkIsRUFBZ0NJLFNBQWhDLEVBQTJDRCxZQUEzQyxDQVZlLENBQWxCO0FBWUEsc0JBQ0UsNkJBQUMsNkJBQUQ7QUFDRSxJQUFBLHdCQUF3QixFQUFFSix3QkFENUI7QUFFRSxJQUFBLFlBQVksRUFBRU0sU0FGaEI7QUFHRSxJQUFBLFFBQVEsRUFBRUosUUFIWjtBQUlFLElBQUEsU0FBUyxFQUFFRCxPQUFPLElBQUlBLE9BQU8sQ0FBQ2E7QUFKaEMsSUFERjtBQVFELENBeEJEOztBQTBCQWYsZUFBZSxDQUFDa0IsWUFBaEIsR0FBK0I7QUFDN0JqQixFQUFBQSx3QkFBd0IsRUFBRSxFQURHO0FBRTdCRSxFQUFBQSxRQUFRLEVBQUVnQjtBQUZtQixDQUEvQjtBQUtBbkIsZUFBZSxDQUFDb0IsU0FBaEIsR0FBNEI7QUFDMUJuQixFQUFBQSx3QkFBd0IsRUFBRW9CLG1CQUFVQyxNQURWO0FBRTFCcEIsRUFBQUEsT0FBTyxFQUFFbUIsbUJBQVVFLEtBQVYsQ0FBZ0I7QUFDdkJiLElBQUFBLE1BQU0sRUFBRVcsbUJBQVVHLE9BQVYsQ0FDTkgsbUJBQVVFLEtBQVYsQ0FBZ0I7QUFDZFIsTUFBQUEsR0FBRyxFQUFFTSxtQkFBVUksR0FERDtBQUVkWCxNQUFBQSxHQUFHLEVBQUVPLG1CQUFVQztBQUZELEtBQWhCLENBRE0sQ0FEZTtBQU92QlAsSUFBQUEsR0FBRyxFQUFFTSxtQkFBVUk7QUFQUSxHQUFoQixFQVFOQyxVQVZ1QjtBQVcxQnZCLEVBQUFBLFFBQVEsRUFBRWtCLG1CQUFVTTtBQVhNLENBQTVCO2VBY2UzQixlIiwic291cmNlUm9vdCI6ImJ1bmRsZTovLy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBob29rcyB9IGZyb20gJ2JvdGZyYW1ld29yay13ZWJjaGF0LWNvbXBvbmVudCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCBBZGFwdGl2ZUNhcmRCdWlsZGVyIGZyb20gJy4vQWRhcHRpdmVDYXJkQnVpbGRlcic7XG5pbXBvcnQgQWRhcHRpdmVDYXJkUmVuZGVyZXIgZnJvbSAnLi9BZGFwdGl2ZUNhcmRSZW5kZXJlcic7XG5pbXBvcnQgdXNlQWRhcHRpdmVDYXJkc1BhY2thZ2UgZnJvbSAnLi4vaG9va3MvdXNlQWRhcHRpdmVDYXJkc1BhY2thZ2UnO1xuXG5jb25zdCB7IHVzZURpcmVjdGlvbiwgdXNlU3R5bGVPcHRpb25zIH0gPSBob29rcztcblxuY29uc3QgSGVyb0NhcmRDb250ZW50ID0gKHsgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lLCBjb250ZW50LCBkaXNhYmxlZCB9KSA9PiB7XG4gIGNvbnN0IFthZGFwdGl2ZUNhcmRzUGFja2FnZV0gPSB1c2VBZGFwdGl2ZUNhcmRzUGFja2FnZSgpO1xuICBjb25zdCBbc3R5bGVPcHRpb25zXSA9IHVzZVN0eWxlT3B0aW9ucygpO1xuICBjb25zdCBbZGlyZWN0aW9uXSA9IHVzZURpcmVjdGlvbigpO1xuICBjb25zdCBidWlsdENhcmQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBidWlsZGVyID0gbmV3IEFkYXB0aXZlQ2FyZEJ1aWxkZXIoYWRhcHRpdmVDYXJkc1BhY2thZ2UsIHN0eWxlT3B0aW9ucywgZGlyZWN0aW9uKTtcblxuICAgIGlmIChjb250ZW50KSB7XG4gICAgICAoY29udGVudC5pbWFnZXMgfHwgW10pLmZvckVhY2goaW1hZ2UgPT4gYnVpbGRlci5hZGRJbWFnZShpbWFnZS51cmwsIG51bGwsIGltYWdlLnRhcCkpO1xuXG4gICAgICBidWlsZGVyLmFkZENvbW1vbihjb250ZW50KTtcblxuICAgICAgcmV0dXJuIGJ1aWxkZXIuY2FyZDtcbiAgICB9XG4gIH0sIFthZGFwdGl2ZUNhcmRzUGFja2FnZSwgY29udGVudCwgZGlyZWN0aW9uLCBzdHlsZU9wdGlvbnNdKTtcblxuICByZXR1cm4gKFxuICAgIDxBZGFwdGl2ZUNhcmRSZW5kZXJlclxuICAgICAgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lPXthY3Rpb25QZXJmb3JtZWRDbGFzc05hbWV9XG4gICAgICBhZGFwdGl2ZUNhcmQ9e2J1aWx0Q2FyZH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHRhcEFjdGlvbj17Y29udGVudCAmJiBjb250ZW50LnRhcH1cbiAgICAvPlxuICApO1xufTtcblxuSGVyb0NhcmRDb250ZW50LmRlZmF1bHRQcm9wcyA9IHtcbiAgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lOiAnJyxcbiAgZGlzYWJsZWQ6IHVuZGVmaW5lZFxufTtcblxuSGVyb0NhcmRDb250ZW50LnByb3BUeXBlcyA9IHtcbiAgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjb250ZW50OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGltYWdlczogUHJvcFR5cGVzLmFycmF5T2YoXG4gICAgICBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICB0YXA6IFByb3BUeXBlcy5hbnksXG4gICAgICAgIHVybDogUHJvcFR5cGVzLnN0cmluZ1xuICAgICAgfSlcbiAgICApLFxuICAgIHRhcDogUHJvcFR5cGVzLmFueVxuICB9KS5pc1JlcXVpcmVkLFxuICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2xcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEhlcm9DYXJkQ29udGVudDtcbiJdfQ==